(function(d){d.videoGallery=function(xc,yc,zc,n){function Ac(a,b){if(p)return J&&J.scrollByX(100*(0<b?-1:1)),!1}function Oa(){A&&(pa.css("display","none"),R.unbind("mousemove",Lb),R.unbind("mouseout",Oa),K.unbind("mouseout",Oa))}function Lb(a){a=a.pageX-Pa.offset().left;0>a?a=0:a>fa&&(a=fa);var b=parseInt(ca.css("width"),10)+a-parseInt(R.css("right"),10)-parseInt(R.css("width"),10)+parseInt(Pa.css("left"),10)-pa.width()/2;pa.css("left",b+"px");a=Math.max(0,Math.min(1,a/fa));a=parseInt(100*a,10);nb.html(a+ " %");a=pa.width()/2-nb.width()/2;nb.css("left",a+"px")}function Qa(a){j=Math.max(0,Math.min(1,(a.pageX-Pa.offset().left)/fa));Ra()}function Mb(){K.unbind("mousemove",Qa);K.unbind("mouseup touchend MozTouchUp",Mb);R.unbind("mouseup",Qa);ob=!1;0==j?(c.find(".player_volume").find("img").attr("src","img/volume_off.png"),e.muted=!0):0<j&&(c.find(".player_volume").find("img").attr("src","img/volume_on.png"),e.muted=!1);return!1}function Ra(){Nb.css("width",j*fa+"px");l?e.volume=j:t("flashPreview").pb_setVolume(j)} function Sa(){A&&(qa.css("display","none"),G.unbind("mousemove",Ob),G.unbind("mouseout",Sa),K.unbind("mouseout",Sa))}function Ob(a){a=a.pageX-G.offset().left;0>a?a=0:a>u&&(a=u);var b=a+parseInt(G.css("left"),10)-qa.width()/2;qa.css("left",b+"px");a=Math.max(0,Math.min(1,a/u));l&&(a*=e.duration,pb.html(qb(a)+rb(e.duration)));a=qa.width()/2-pb.width()/2;pb.css("left",a+"px")}function Ta(a){ga=a.pageX-Ua.offset().left;0>ga?ga=0:ga>u&&(ga=u);Va.css("width",ga+"px");a=Math.max(0,Math.min(1,ga/u));if(l){a= (a*e.duration).toFixed(1);try{e.currentTime=a}catch(b){}}}function Pb(){K.unbind("mousemove",Ta);K.unbind("mouseup touchend MozTouchUp",Pb);G.unbind("mouseup",Ta);return Wa=!1}function ya(){var a=E-H,b=0,c=0,f=0,o=M;a==M*B?(q>=M*B?b=M*za+(M-1)*Xa:(f=Math.ceil(q/B),b=f*za+(f-1)*Xa),c=q>=B?B*ha+(B-1)*ra:q*ha+(q-1)*ra):a<M*B&&(f=Math.ceil(a/B),b=f*za+(f-1)*Xa,c=a>=B?B>M?M*ha+(M-1)*ra:B*ha+(B-1)*ra:a*ha+(a-1)*ra,o=f);for(var a=Math.ceil(g("w")/2-b/2),c=Math.ceil(g("h")/2-c/2-Bc),b=za,f=ha,e=Xa,k=ra,m= [],j,h,n,p=o*B,l=0;l<p;l++)j={},h=l%o,n=Math.floor(l/o),j.x=h*(b+e)+a,j.y=n*(f+k)+c,m.push(j);sb=m;a=H;c=E;b=0;for(b;b<a;b++)o=d(C[b]),o.css("left","-10000px"),o.css("top","0px");b=0;for(a;a<c;a++)o=d(C[a]),o.css("left",sb[b].x+"px"),o.css("top",sb[b].y+"px"),b++;for(c;c<q;c++)o=d(C[c]),o.css("left","-10000px"),o.css("top","0px");a=0;o=H;b=E;for(o;o<b;o++)c=d(C[o]),c.css("opacity",0),c.delay(50*a).animate({opacity:1},{duration:Qb,easing:"easeOutSine"}),a++;Aa&&clearTimeout(Aa);Aa=setTimeout(Cc,Qb+ 50*(E-H))}function Rb(){var a=H,b=E,c;for(a;a<b;a++)c=d(C[a]),c.css("left","-10000px"),c.css("opacity",0)}function Cc(){Aa&&clearTimeout(Aa);Ya||(S.attr("data-title",""),T.attr("data-title",""),0==H&&S.attr("data-title","hidden"),E==q&&T.attr("data-title","hidden"),"hidden"!=S.attr("data-title")&&(S.css("cursor","pointer"),S.css("opacity",1)),"hidden"!=T.attr("data-title")&&(T.css("cursor","pointer"),T.css("opacity",1)),sa&&($.css("cursor","pointer"),$.css("opacity",1)),ta=!1)}function Sb(){Ya||(S.css("cursor", "default"),$.css("cursor","default"),T.css("cursor","default"),S.css("opacity",playlistControlsOffOpacity),$.css("opacity",playlistControlsOffOpacity),T.css("opacity",playlistControlsOffOpacity))}function Tb(){sa=!0;$.css("cursor","pointer");$.css("opacity",1)}function tb(a){if(p){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var a=d(a.currentTarget),b=a.attr("class");if("hidden"!=a.attr("data-title")){b=a.attr("class");if("playlistBackward"==b){if(ta)return; ta=!0;Sb();Rb();E=H;H=E-M*B;0>H&&(H=0);ya()}else if("playlistForward"==b){if(ta)return;ta=!0;Sb();Rb();H=E;E=H+M*B;E>q&&(E=q);ya()}else if("playlistClose"==b){if(!sa)return;Za("off")}return!1}}}function Za(a){Ba||(Ba=!0,"off"==a?(sa||Tb(),f.stop().animate({height:"0px"},{duration:500,easing:"easeOutQuint",complete:Dc})):"on"==a&&(f.css("left","0px"),f.stop().animate({height:g("h")+"px"},{duration:500,easing:"easeOutQuint",complete:Ec})))}function Ec(){ua="playlist";Ba=!1}function Dc(){ua="player"; A&&Ca&&(Ca=!1,l?e.play():t("flashPreview").pb_togglePlayback2(!0));Da();Ba=!1}function ub(){var a;Ea?("top"==r?(a=parseInt(f.css("height"),10),f.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuart"})):"bottom"!=r&&("left"==r?(a=parseInt(f.css("width"),10),f.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuart"})):"right"==r&&(a=parseInt(f.css("width"),10),f.stop().animate({right:-a+"px"},{duration:500,easing:"easeOutQuart"}))),Ea=!1):("top"==r?f.stop().animate({top:"0px"}, {duration:500,easing:"easeOutQuart"}):"bottom"!=r&&("left"==r?f.stop().animate({left:"0px"},{duration:500,easing:"easeOutQuart"}):"right"==r&&f.stop().animate({right:"0px"},{duration:500,easing:"easeOutQuart"})),Ea=!0)}function Fc(){var a;"top"==r?(a=parseInt(f.css("height"),10),f.css("top",-a+"px")):"bottom"!=r&&("left"==r?(a=parseInt(f.css("width"),10),f.css("left",-a+"px")):"right"==r&&(a=parseInt(f.css("width"),10),f.css("right",-a+"px")));Ea=!1}function vb(a){var b,e=0,L;if(wb){ia();Ub();Vb(); for(e;e<q;e++)b=d(C[e]),b.unbind("click",Wb),b.unbind("mouseover",Xb),b.unbind("mouseout",Yb),b.removeClass("playlistSelected").addClass("playlistNonSelected");wb.css("display","none")}playlist=d(x.find("ul[id="+a+"]"));playlist.css("display","block");wb=playlist;C=[];Fa=[];Ga=[];Ha=[];$a=[];Ia=[];Ca=Ba=ta=Ya=sa=!1;Fc();Ea=!1;ja&&clearInterval(ja);ka=va=!1;j=n.defaultVolume;0>j?j=0:1<j&&(j=1);ab=j;"grid"==D&&(S.css("cursor","default"),$.css("cursor","default"),T.css("cursor","default"),S.css("opacity", playlistControlsOffOpacity),$.css("opacity",playlistControlsOffOpacity),T.css("opacity",playlistControlsOffOpacity));var o;playlist.filter(function(){C=d(this).find("li[class='playlistNonSelected']");Fa=o=d(this).find("div[class='playlistThumb']");Ga=o.find("img[class='thumb']");Ha=o.find("img[dataTitle='thumbPreloader']");$a=o.find("div[dataTitle='videoDiv']");Ia=o.find("div[dataTitle='hitdiv']")});o=d(Ga[0]);V=o.width();W=o.height();aa.css("width",V+"px");aa.css("height",W+"px");q=C.length;b=d(C[0]); var h=parseInt(b.outerWidth(),10),a=parseInt(b.outerHeight(),10);za=h;ha=a;var l=!1,r;0<Ha.length&&(l=!0);"horizontal"==Ja&&(e=q*h+(q-1)*parseInt(b.css("marginRight"),10),playlist.css("width",e+"px"),J&&J.reinitialise());e=0;for(e;e<q;e++)b=d(C[e]),b.bind("click",Wb),b.bind("mouseover",Xb),b.bind("mouseout",Yb),b.attr("data-id",e),l||(L=d("<div/>"),Ia[e]=L,L.css({position:"absolute",width:h+"px",height:a+"px",top:"0px",left:"0px",background:"#ad4",zIndex:200,cursor:"pointer",opacity:0}),L.attr("dataTitle", "hitdiv"),b.append(L),L=d("<div/>"),$a[e]=L,L.css({position:"absolute",width:V+"px",height:W+"px",top:"0px",left:"0px",zIndex:100}).attr({dataTitle:"videoDiv"}),d(Fa[e]).append(L),L=d(new Image),L.attr("data-id",e),Ha[e]=L,L.load(function(){d(this).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"50%",left:"50%",marginLeft:-this.width/2+"px",marginTop:-this.height/2+"px",display:"none"});r=d(this).attr("data-id");d(Fa[r]).append(d(this))}).attr({src:Zb,dataTitle:"thumbPreloader"})), o=d(Ga[e]),o.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"});"line"==D&&"vertical"==Ja?b.css("marginBottom","0px"):(q<=B*M&&(Ya=!0,S.css("opacity",0),T.css("opacity",0),S.css("cursor","default"),T.css("opacity","default")),b.css("marginRight","0px"));Gc(C);k=n.activeItem;k>q-1&&(k=q-1);f.css("display","block");"line"==D?(J?(J.reinitialise(),"vertical"==Ja?J.scrollToY(0):J.scrollToX(0)):(J=x.jScrollPane().data().jsp,"vertical"==Ja?x.jScrollPane({verticalDragMinHeight:50,verticalDragMaxHeight:60}): x.jScrollPane({horizontalDragMinWidth:50,horizontalDragMaxWidth:60,verticalGutter:20})),Hc&&ub()):(f.css("top","0px"),f.css("width",g("w")+"px"),f.css("height",g("h")+"px"),f.css("zIndex",20),m.css("width",g("w")+"px"),m.css("height",g("h")+"px"),m.css("left","0px"),m.css("top","0px"),x.css("width",g("w")+"px"),x.css("height",g("h")+"px"),x.css("left","0px"),x.css("top","0px"),-1==k?(ua="playlist",f.css("left","0px")):(ua="player",sa=!0,f.css("left","-10000px"),f.css("height","0px")));p||(p=!0,videoGallerySetupDone(), $b?(c.bind("mouseenter",Ic),c.bind("mouseleave",Jc)):Da());-1<k&&(la(),ma());"grid"==D&&(H=0,E=H+M*B,E>q&&(E=q),ya())}function ac(){ia();k++;k>q-1&&(k=0,videoGalleryPlaylistEnd());la();ma()}function Kc(){if(v){var a=parseInt(v.css("borderLeftWidth"),10),b=parseInt(v.css("marginLeft"),10),d=parseInt(v.css("paddingLeft"),10),c=parseInt(m.css("borderLeftWidth"),10),e=parseInt(m.css("marginLeft"),10),f=parseInt(m.css("paddingLeft"),10),g=parseInt(v.css("borderTopWidth"),10),k=parseInt(v.css("marginTop"), 10),h=parseInt(v.css("paddingTop"),10),j=parseInt(m.css("borderTopWidth"),10),l=parseInt(m.css("marginTop"),10),n=parseInt(m.css("paddingTop"),10),a=parseInt(v.offset().left,10)-parseInt(m.offset().left,10)+a+b+d+c+e+f,g=parseInt(v.offset().top,10)-parseInt(m.offset().top,10)+g+k+h+j+l+n;aa.css("left",a+"px");aa.css("top",g+"px")}}function Xb(a){if(p){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var b=d(a.currentTarget),a=b.attr("data-id");if(a!=k&&(!bb|| !b.hasClass("playlistSelected"))){b.removeClass("playlistNonSelected").addClass("playlistSelected");"grid"==D&&(b=b.find("div[class='playlistTitleNonSelected']"))&&b.removeClass("playlistTitleNonSelected").addClass("playlistTitleSelected");if(cb)if(bc=a,v=d(Fa[a]),F=d(C[a]).attr("data-preview"),db=d(Ga[a]),db.stop().animate({opacity:0},{duration:500,easing:"easeOutSine"}),da=d(Ha[a]),da.css("display","block"),Ka=d($a[a]),l){if(a="",xb?(F+=".mp4",ea?(a+='<video class="preview_video_cont" width="'+ V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" />'):(a+='<video class="preview_video_cont" width="'+V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" type="video/mp4" />'),a+="</video>"):cc?(F+=".ogv",ea?(a+='<video class="preview_video_cont" width="'+V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" />'):(a+='<video class="preview_video_cont" width="'+V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" type="video/ogg" />'),a+="</video>"):dc&&(F+= ".webm",ea?(a+='<video class="preview_video_cont" width="'+V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" />'):(a+='<video class="preview_video_cont" width="'+V+'" height="'+W+'" preload="auto" >',a+='<source src="'+F+'" type="video/webm" />'),a+="</video>"),Ka.html(a),N=Ka.find(".preview_video_cont"),wa=N[0],N.bind("ended",ec),N.bind("canplaythrough",yb),N.bind("canplay",zb),eb)wa.src=F,wa.load()}else t("flashMiniPreview").pb_play(F,X,V,W);return!1}}}function ec(){wa.currentTime= 0}function yb(){fc()}function zb(){fc()}function fc(){N&&(N.unbind("canplaythrough",yb),N.unbind("canplay",zb));da&&da.css("display","none");wa&&wa.play()}function Ab(){l?(N&&(N.unbind("ended",ec),N.unbind("canplaythrough",yb),N.unbind("canplay",zb),N.find("source").attr("src","")),Ka&&Ka.html("")):(ja&&clearInterval(ja),t("flashMiniPreview").pb_dispose(),aa.css("left","-10000px"));da&&da.css("display","none");db&&db.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}function Yb(a){if(p){a|| (a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var b=d(a.currentTarget),c=b.attr("data-id");if(cb){if(bb&&v){var e=parseInt(v.css("borderLeftWidth"),10),g=parseInt(v.css("marginLeft"),10),f=parseInt(v.css("paddingLeft"),10),h=parseInt(v.css("borderTopWidth"),10),j=parseInt(v.css("marginTop"),10),l=parseInt(v.css("paddingTop"),10),e=parseInt(v.offset().left,10)-parseInt(m.offset().left,10)+e+g+f,h=parseInt(v.offset().top,10)-parseInt(m.offset().top,10)+h+j+ l,j=a.pageX-parseInt(m.offset().left,10),a=a.pageY-parseInt(m.offset().top,10);if(j>=e&&j<=e+V&&a>=h&&a<=h+W)return}Ab()}if(c!=k)return b.removeClass("playlistSelected").addClass("playlistNonSelected"),"grid"==D&&(b=b.find("div[class='playlistTitleSelected']"))&&b.removeClass("playlistTitleSelected").addClass("playlistTitleNonSelected"),!1}}function Wb(a){if(p)if(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget).attr("data-id"),a==k)"grid"== D&&Za("off");else return cb&&Ab(),ia(),k=a,la(),ma(),"grid"==D?Za("off"):La&&Lc&&ub(),!1}function ia(){if(-1!=k){var a=d(C[k]);a.removeClass("playlistSelected").addClass("playlistNonSelected");if("line"==D){var b=Ia[k];b&&b.css("cursor","pointer")}"grid"==D&&(a=a.find("div[class='playlistTitleNonSelected']"))&&a.removeClass("playlistTitleSelected").addClass("playlistTitleNonSelected")}}function la(){var a=d(C[k]);a.removeClass("playlistNonSelected").addClass("playlistSelected");"grid"==D?(a=a.find("div[class='playlistTitleNonSelected']"))&& a.removeClass("playlistTitleNonSelected").addClass("playlistTitleSelected"):(a=Ia[k])&&a.css("cursor","default")}function Mc(a){if(p){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var b=d(a.currentTarget),a=b.attr("class"),b=b.find("img");if("player_playControl"==a)Bb();else if("player_volume"==a)0==j?(j=ab,l&&(e.muted=!1),Ra(),b.attr("src","img/volume_on.png")):(ab=j,l&&(e.muted=!0),j=0,Ra(),b.attr("src","img/volume_off.png"));else if("toggle_playlist"== a)"grid"==D?(l?A&&!e.paused&&(e.pause(),Ca=!0):A&&t("flashPreview").pb_getMediaPlaying()&&(t("flashPreview").pb_togglePlayback2(!1),Ca=!0),Za("on")):ub();else if("player_info"==a)gc();else if("player_share"==a)va?(fb.css("display","none"),va=!1):(fb.css("display","block"),va=!0);else if("player_fullscreen"==a){Cb=0;U="normal"==U?"fullscreen":"normal";if(Db&&(gb||l))document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen? document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();!gb||!Db?hb():"normal"==U&&hb()}return!1}}function Nc(a){if(p){a||(a=window.event); a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var b=d(a.currentTarget),a=b.attr("class"),b=b.find("img");"player_playControl"==a?na?b.attr("src","img/pause_on.png"):b.attr("src","img/play_on.png"):"player_volume"==a?0==j?b.attr("src","img/volume_off_on.png"):b.attr("src","img/volume_on_on.png"):"toggle_playlist"==a?b.attr("src","img/playlist_on.png"):"player_info"==a?b.attr("src","img/info_on.png"):"player_share"==a?b.attr("src", "img/share_on.png"):"player_fullscreen"==a&&("normal"==U?b.attr("src","img/fullscreen_enter_on.png"):b.attr("src","img/fullscreen_exit_on.png"));return!1}}function Oc(a){if(p){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();var b=d(a.currentTarget),a=b.attr("class"),b=b.find("img");"player_playControl"==a?na?b.attr("src","img/pause.png"):b.attr("src","img/play.png"):"player_volume"==a?0==j?b.attr("src","img/volume_off.png"): b.attr("src","img/volume_on.png"):"toggle_playlist"==a?b.attr("src","img/playlist.png"):"player_info"==a?b.attr("src","img/info.png"):"player_share"==a?b.attr("src","img/share.png"):"player_fullscreen"==a&&("normal"==U?b.attr("src","img/fullscreen_enter.png"):b.attr("src","img/fullscreen_exit.png"));return!1}}function Pc(){O.css("display","block");I&&I.css("display","block");h=d(new Image);h.css({position:"absolute",display:"block",opacity:0});O.append(h); var a=y,a=a+".jpg?rand="+99999999*Math.random();h.load(function(){I&&I.css("display","none");Eb(h);h.animate({opacity:1},{duration:500,easing:"easeOutSine"});w&&w.css("display","block")}).attr("src",a);h.error(function(){})}function ma(){Ub();var a=d(C[k]);y=a.attr("data-path");Y=parseInt(a.attr("data-width"),10);Z=parseInt(a.attr("data-height"),10);ba?l?Fb():(t("flashPreview").pb_play(y,X),A=!0):Pc()}function Ub(){hc();Qc();if(l){if(s&&(Ma&&clearInterval(Ma),s.find("source").attr("src",""),s.unbind("ended", ic),s.unbind("loadedmetadata",jc),s.unbind("waiting",kc),s.unbind("playing",lc),s.unbind("play",mc),s.unbind("pause",nc),P.html("")),w&&w.css("display","none"),h)h.remove(),h=null}else t("flashPreview").pb_dispose();Vb();A=na=!1}function Fb(){var a="";xb?(y+=".mp4",ea?(a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" />'):(a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" type="video/mp4" />'),a+="</video>"):cc?(y+=".ogv",ea? (a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" />'):(a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" type="video/ogg" />'),a+="</video>"):dc&&(y+=".webm",ea?(a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" />'):(a+='<video class="video_cont" width="'+Y+'" height="'+Z+'" >',a+='<source src="'+y+'" type="video/webm" />'),a+="</video>");P.css("display","block");P.html(a);s=c.find(".video_cont"); if(l&&(e=s[0],e.volume=j,s.bind("ended",ic),s.bind("loadedmetadata",jc),s.bind("waiting",kc),s.bind("playing",lc),s.bind("play",mc),s.bind("pause",nc),eb&&(e.src=y,e.load()),ea))e.play(),w&&w.css("display","none"),_imageHolder.stop().animate({opacity:0},{duration:fadeTime,easing:fadeEase,complete:function(){_imageHolder.empty()}}),A=!0}function kc(){I&&I.css("display","block")}function lc(){I&&I.css("display","none")}function mc(){c.find(".player_playControl").find("img").attr("src","img/pause.png"); w&&w.css("display","none");na=!0}function nc(){c.find(".player_playControl").find("img").attr("src","img/play.png");w&&w.css("display","block");na=!1}function jc(){Gb();Ma&&clearInterval(Ma);Ma=setInterval(Rc,Sc);ea||(ba?Bb():e.paused&&e.play());oc();eb&&Tc&&(ba=!0);Da()}function Bb(){!A&&!ba?(h&&h.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){h.remove();h=null}}),l?Fb():t("flashPreview").pb_play(y,X)):l?e.paused?e.play():e.pause():t("flashPreview").pb_togglePlayback(); A=!0;return!1}function Rc(){Hb.html(qb(e.currentTime)+rb(e.duration));if(!Wa){Va.css("width",e.currentTime/e.duration*u+"px");try{var a=Math.floor(e.buffered.end(0))}catch(b){}a/=Math.floor(e.duration);isNaN(a)||Ib.css("width",a*u+"px")}}function ic(){Uc?ac():(e.currentTime=0,e.play(),ba||e.pause())}function Vc(){void 0!=t("flashPreview").setData&&(xa&&clearInterval(xa),t("flashPreview").setData(n,u,ib,fa,pc),"grid"==D&&(f.css("display","block"),f.css("left","-10000px")),aa.css("display","block"), xa=setInterval(Wc,qc))}function Wc(){void 0!=t("flashMiniPreview").setData&&(xa&&clearInterval(xa),t("flashMiniPreview").setData(n,bb),aa.css("left","-10000px"),vb(rc))}function t(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function Ic(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),Da(),!1}function Jc(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),hc(), !1}function oc(){var a=d(C[k]);void 0!=a.attr("data-description")&&(a=a.attr("data-description"),z.html(a),Na.css("opacity",0),Na.css("display","block"),Na.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),Xc&&gc())}function Qc(){z.css("display","none");z.html("");Na.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Na.css("display","none")}});ka=!1}function gc(){if(ka)z.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){z.css("display", "none")}}),ka=!1;else{var a=parseInt(z.css("paddingLeft"),10)+parseInt(z.css("paddingRight"),10);"normal"==U?z.css("width",oa-a+"px"):z.css("width",g("w")-a+"px");z.css("opacity",0);z.css("display","block");z.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"});ka=!0}}function Da(){A&&(sc.css("display","block"),$b&&va&&fb.css("display","block"),l?ca.css("display","block"):t("flashPreview").pb_toggleControls(!0))}function hc(){l?ca.css("display","none"):t("flashPreview").pb_toggleControls(!1); sc.css("display","none");va&&fb.css("display","none")}function hb(){if("fullscreen"==U){Jb.css("overflow","hidden");La||f.css("left","-10000px");c.css("width",g("w")+"px");c.css("height",g("h")+"px");c.css("left","0px");c.css("top","0px");c.css("marginLeft","0px");c.css("marginTop","0px");Q.css("width",g("w")+"px");Q.css("height",g("h")+"px");Q.css("left","0px");Q.css("top","0px");P.css("width",g("w")+"px");P.css("height",g("h")+"px");P.css("left","0px");P.css("top","0px");O.css("width",g("w")+"px"); O.css("height",g("h")+"px");O.css("left","0px");O.css("top","0px");if(La){var a;if("top"==r||"bottom"==r)a=parseInt(f.css("width"),10)-parseInt(m.css("width"),10),f.css("width",g("w")+"px"),m.css("width",g("w")-a+"px");else if("left"==r||"right"==r)a=parseInt(f.css("height"),10)-parseInt(m.css("height"),10),f.css("height",g("h")+"px"),m.css("height",g("h")-a+"px");J&&J.reinitialise()}"grid"==D&&(f.css("width",g("w")+"px"),"playlist"==ua&&f.css("height",g("h")+"px"),m.css("width",g("w")+"px"),m.css("height", g("h")+"px"),m.css("left","0px"),m.css("top","0px"),x.css("width",g("w")+"px"),x.css("height",g("h")+"px"),x.css("left","0px"),x.css("top","0px"),ya());h&&Eb(h);l&&Gb();ca.css("width",g("w")-pc+"px");u=parseInt(ca.css("width"),10)-Yc;Ua.css("width",u+"px");G.css("width",u+20+"px");ka&&(a=parseInt(z.css("paddingLeft"),10)+parseInt(z.css("paddingRight"),10),z.css("width",g("w")-a+"px"))}else{Jb.css("overflow",Zc);c.css("width",tc+"px");c.css("height",uc+"px");c.css("left","50%");c.css("top","50%"); c.css("marginLeft",-tc/2+"px");c.css("marginTop",-uc/2+"px");Q.css("width",g("w")+"px");Q.css("height",g("h")+"px");Q.css("left",$c+"px");Q.css("top",ad+"px");P.css("width",g("w")+"px");P.css("height",g("h")+"px");P.css("left","0px");P.css("top","0px");O.css("width",g+"px");O.css("height",g+"px");O.css("left","0px");O.css("top","0px");if(La){if("top"==r||"bottom"==r)a=parseInt(f.css("width"),10)-parseInt(m.css("width"),10),f.css("width",g("w")+"px"),m.css("width",g("w")-a+"px");else if("left"==r|| "right"==r)a=parseInt(f.css("height"),10)-parseInt(m.css("height"),10),f.css("height",g("h")+"px"),m.css("height",g("h")-a+"px");J&&J.reinitialise()}"grid"==D&&(f.css("width",g("w")+"px"),"playlist"==ua&&f.css("height",g("h")+"px"),m.css("width",g("w")+"px"),m.css("height",g("h")+"px"),m.css("left","0px"),m.css("top","0px"),x.css("width",g("w")+"px"),x.css("height",g("h")+"px"),x.css("left","0px"),x.css("top","0px"),ya());h&&Eb(h);l&&Gb();ca.css("width",bd+"px");u=cd;Ua.css("width",u+"px");G.css("width", u+20+"px");La||f.css("left",dd+"px");ka&&(a=parseInt(z.css("paddingLeft"),10)+parseInt(z.css("paddingRight"),10),z.css("width",oa-a+"px"))}}function Eb(a){var b,c;0!=X&&(1==X?b=jb(!0,a):2==X&&(b=jb(!1,a)));a.css("width",b.width+"px");a.css("height",b.height+"px");c=(g("w")-b.width)/2;b=(g("h")-b.height)/2;a.css("left",c+"px");a.css("top",b+"px")}function Gb(){var a,b;0==X?a=vc():1==X?a=jb(!0):2==X&&(a=jb(!1));s.css("width",a.width+"px");s.css("height",a.height+"px");b=(g("w")-a.width)/2;a=(g("h")- a.height)/2;s.css("left",b+"px");s.css("top",a+"px")}function jb(a,b){var c=g("w"),d=g("h"),e,f,h={};b?(e=b.width(),f=b.height()):(b=vc(),e=b.width,f=b.height);var j=(c-0)/(d-0),k=e/f;k<j?a?(h.width=(d-0)/f*e,h.height=d-0):(h.height=(c-0)/e*f,h.width=c-0):k>j?a?(h.height=(c-0)/e*f,h.width=c-0):(h.width=(d-0)/f*e,h.height=d-0):(h.width=c-0,h.height=d-0);return h}function vc(){var a={};!Y||isNaN(Y)||!Z||isNaN(Z)?(a.width=e.videoWidth,a.height=e.videoHeight):(a.width=Y,a.height=Z);return a}function g(a){return"w"== a?"normal"==U?oa:Math.max(d(window).width(),document.documentElement.clientWidth):"normal"==U?kb:Math.max(d(window).height(),document.documentElement.clientHeight)}function Vb(){Hb.html("0:00 | 0:00");Va.css("width","0px");Ib.css("width","0px")}function qb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function rb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a% 60);return" | "+minutes+":"+(10<=a?a:"0"+a)}function Gc(a){d(a).each(function(){d(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}function ed(){"fullscreen"==U&&hb()}var p=!1,Jb=d("body"),fd=d(window),K=d(document),c=d(xc),m=c.find(".componentPlaylist"),x=c.find(".playlist_inner");x.find("ul").each(function(){d(this).css("display","none")});var f=c.find(".playlistHolder"); c.find(".playerHolder");var Hb=c.find(".player_mediaTime"),ca=c.find(".playerControls"),bc,v,db,da,Ka,cb=n.useLivePreview,N,wa,ba=n.autoPlay,Tc=ba,Uc=n.autoAdvanceToNextVideo,wb=null,rc=n.activePlaylist,dd=parseInt(f.css("left"),10),bb=!1;d.browser.msie&&8>parseInt(d.browser.version,10)&&(bb=!0);var lb=navigator.userAgent,gd=jQuery.browser.mobile,eb=!1;if(-1<lb.indexOf("iPhone")||-1<lb.indexOf("iPod")||-1<lb.indexOf("iPad"))eb=!0;var ea=-1<lb.indexOf("Android");gd&&(ba=!1);var cc=function(){var a= document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""))}(),xb=function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))}(),dc=function(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""))}(),l=!!document.createElement("video").canPlayType,Cb=0,Db=n.useRealFullscreen, gb=!1,wc=c.find(".player_fullscreen").children("img");(function(){var a=!1;document.documentElement.requestFullScreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0);return a})()&&(gb=!0);var h,I,Zb="img/loading.gif",w,$b=n.autoHideControls,Kb,X=2,A=!1,y,F,na=!1,V,W,Xc=n.autoOpenDescription,ja,qc=100,xa,mb=d(yc),aa=d(zc);aa.css("zIndex",50);var Sc=100,Ma,Ja=n.playlistOrientation,k,Fa=[],Ga=[],Ia=[],Ha=[],$a=[],C=[],q,Y,Z,U="normal", s,e,Q=c.find(".mediaWrapper"),P=c.find(".mediaHolder"),O=c.find(".mediaPreview"),tc=parseInt(c.css("width"),10),uc=parseInt(c.css("height"),10),oa=parseInt(Q.css("width"),10),kb=parseInt(Q.css("height"),10);P.css("width",oa+"px");P.css("height",kb+"px");mb.css("width",oa+"px");mb.css("height",kb+"px");O.css("width",oa+"px");O.css("height",kb+"px");var ad=parseInt(Q.css("top"),10),$c=parseInt(Q.css("left"),10),fb=c.find("#shareHolder"),va=!1,sc=c.find(".player_addon"),z=c.find(".infoHolder"),ka=!1, Na=c.find(".player_info");c.find(".player_volume");var ga,Wa=!1,G=c.find(".player_progress"),Ua=c.find(".progress_bg"),Ib=c.find(".load_level"),Va=c.find(".progress_level"),u=Ua.width();G.css("cursor","pointer");G.bind("mousedown touchstart MozTouchDown",function(){if(p&&!ob)return Wa=!0,K.bind("mousemove",Ta),K.bind("mouseup touchend MozTouchUp",Pb),G.bind("mouseup",Ta),!1});var ib=parseInt(ca.css("width"),10),pc=oa-ib,Yc=ib-u,cd=u,bd=ib,Zc=Jb.css("overflow"),qa=c.find(".player_progress_tooltip"), pb=c.find(".player_progress_tooltip_value");G.bind("mouseover",function(){A&&(qa.css("display","block"),G.bind("mousemove",Ob),G.bind("mouseout",Sa),K.bind("mouseout",Sa))});qa.css("left",parseInt(G.css("left"),10)+"px");var ab,j=n.defaultVolume;0>j?j=0:1<j&&(j=1);ab=j;var ob=!1,R=c.find(".volume_seekbar"),Pa=c.find(".volume_bg"),Nb=c.find(".volume_level"),fa=Pa.width();Nb.css("width",j*fa+"px");R.css("cursor","pointer");R.bind("mousedown touchstart MozTouchDown",function(){if(p&&!Wa)return ob=!0, K.bind("mousemove",Qa),K.bind("mouseup touchend MozTouchUp",Mb),R.bind("mouseup",Qa),!1});var pa=c.find(".player_volume_tooltip"),nb=c.find(".player_volume_tooltip_value");R.bind("mouseover",function(){A&&(pa.css("display","block"),R.bind("mousemove",Lb),R.bind("mouseout",Oa),K.bind("mouseout",Oa))});pa.css("left",parseInt(R.css("left"),10)+"px");var D=n.playlistType,B=n.numberOfRowsInPlaylist,M=n.numberOfColumnsInPlaylist,Xa=n.horizontalPreviewSpacing,ra=n.verticalPreviewSpacing,sb=[],za,ha,H,E, Qb=500,Aa,Ya=!1,ta=!1,Bc=n.thumbUpOffset,sa=!1,Ba=!1,Ca=!1,La=n.innerPlaylist,r=n.togglePlaylistSide,Lc=n.closePlaylistOnVideoSelect,Hc=n.autoOpenPlaylist,Ea=!1;l||(ca.remove(),xb=!0);if("grid"==D){var S=c.find(".playlistBackward"),$=c.find(".playlistClose"),T=c.find(".playlistForward");playlistControlsOffOpacity=n.playlistControlsOffOpacity;S.bind("click",tb);$.bind("click",tb);T.bind("click",tb);var ua}else"horizontal"==Ja&&x.bind("mousewheel",Ac);var J;d.videoGallery.flashPreviewVideoStart=function(){da&& da.css("display","none");ja&&clearInterval(ja);ja=setInterval(Kc,100)};d.videoGallery.flashVideoPause=function(){w&&w.css("display","block")};d.videoGallery.flashVideoResume=function(){w&&w.css("display","none")};d.videoGallery.flashVideoEnd=function(){ac()};d.videoGallery.flashVideoStart=function(){A=true;Da();oc()};d.videoGallery.dataUpdateFlash=function(a,b,c,d){Ib.css("width",a/b*u+"px");Va.css("width",c/d*u+"px");Hb.html(qb(c)+rb(d))};(function(){var a=[c.find(".player_playControl"),c.find(".player_volume"), c.find(".toggle_playlist"),c.find(".player_info"),c.find(".player_share"),c.find(".player_fullscreen")],b,e=a.length;i=0;for(i;i<e;i++){b=d(a[i]);b.css("cursor","pointer");b.bind("click",Mc);b.bind("mouseover",Nc);b.bind("mouseout",Oc)}w=d("<div/>");a=d(new Image);a.css({top:0,left:0,display:"block"}).load(function(){w.css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"50%",left:"50%",marginLeft:-this.width/2+"px",marginTop:-this.height/2+"px",cursor:"pointer",zIndex:10,display:"none"}); w.append(this);Q.append(w);w.bind("click",Bb)}).attr("src","img/big_play3.png");I=d("<div/>");a=d(new Image);a.load(function(){I.css({position:"absolute",width:this.width+10+"px",height:this.height+10+"px",top:"50%",left:"50%",marginLeft:-this.width/2-5+"px",marginTop:-this.height/2-5+"px",background:"#111",borderRadius:5,display:"none"});d(this).css({position:"absolute",top:parseInt(I.css("height"),10)/2-this.height/2+"px",left:parseInt(I.css("width"),10)/2-this.width/2+"px",display:"block"}); I.append(this);O.append(I)}).attr("src",Zb)})();l?(mb.remove(),aa.remove(),vb(rc)):(mb.css("display","block"),xa=setInterval(Vc,qc));d.videoGallery.toggleFlashPreview=function(){if(p){var a=bc;if(a!=k){cb&&Ab();ia();k=a;la();ma()}}};if(Db&&gb)K.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){document.fullScreenElement&&document.fullScreenElement!==null||!document.mozFullScreen&&!document.webkitIsFullScreen?wc.attr("src","img/fullscreen_enter.png"):wc.attr("src", "img/fullscreen_exit.png");if(U=="fullscreen"&&Cb>0){U="normal";hb()}Cb=1});fd.resize(function(){if(p){Kb&&clearTimeout(Kb);Kb=setTimeout(ed,50)}});d.videoGallery.playMedia=function(){if(p&&!na&&k!=-1){if(l)if(!A&&!ba){h&&h.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){h.remove();h=null}});Fb()}else e.play();else if(!A&&!ba){h&&h.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){h.remove();h=null}});t("flashPreview").pb_play(y, X)}else t("flashPreview").pb_togglePlayback2(true);A=true}};d.videoGallery.pauseMedia=function(){p&&k!=-1&&na&&(l?e.pause():t("flashPreview").pb_togglePlayback2(false))};d.videoGallery.nextMedia=function(){if(p&&k!=-1){ia();k++;if(k>q-1){k=0;videoGalleryPlaylistEnd()}la();ma()}};d.videoGallery.previousMedia=function(){if(p&&k!=-1){ia();k--;k<0&&(k=q-1);la();ma()}};d.videoGallery.loadMedia=function(a){if(p){a<0?a=0:a>q-1&&(a=q-1);ia();k=a;la();ma();D=="grid"&&Tb()}};d.videoGallery.setVolume=function(a){if(p){a< 0?a=0:a>1&&(a=1);j=a;Ra()}};d.videoGallery.inputPlaylist=function(a){p&&vb(a)}}})(jQuery); (function(d){jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iPad|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(d.substr(0,4))})(navigator.userAgent|| navigator.vendor||window.opera);