function Hammer(e,t,n){function T(e){return e.touches?e.touches.length:1}function N(e){e=e||window.event;if(!S){var t=document,n=t.body;return[{x:e.pageX||e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&t.clientLeft||0),y:e.pageY||e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&t.clientTop||0)}]}var r=[],i;for(var s=0,o=e.touches.length;s<o;s++)i=e.touches[s],r.push({x:i.pageX,y:i.pageY});return r}function C(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function k(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function L(e,t){if(e.length==2&&t.length==2){var n=k(e[0],e[1]),r=k(t[0],t[1]);return r/n}return 0}function A(e,t){if(e.length==2&&t.length==2){var n=C(e[1],e[0]),r=C(t[1],t[0]);return r-n}return 0}function O(e,t){t.touches=N(t.originalEvent),t.type=e,F(r["on"+e])&&r["on"+e].call(r,t)}function M(e){e=e||window.event,e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}function _(){a={},l=!1,f=0,s=0,o=0,c=null}function P(n){function m(){a.start=N(n),p=(new Date).getTime(),f=T(n),l=!0,b=n;var t=e.getBoundingClientRect(),r=e.clientTop||document.body.clientTop||0,i=e.clientLeft||document.body.clientLeft||0,s=window.pageYOffset||e.scrollTop||document.body.scrollTop,o=window.pageXOffset||e.scrollLeft||document.body.scrollLeft;g={top:t.top+s-r,left:t.left+o-i},y=!0,D.hold(n)}var r;switch(n.type){case"mousedown":case"touchstart":r=T(n),x=r===1,r===2&&c==="drag"&&O("dragend",{originalEvent:n,direction:u,distance:s,angle:o}),m(),t.prevent_default&&M(n);break;case"mousemove":case"touchmove":r=T(n);if(!y&&r===1)return!1;!y&&r===2&&(x=!1,_(),m()),w=n,a.move=N(n),D.transform(n)||D.drag(n);break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":var i=!0;y=!1,E=n,D.swipe(n);if(c=="drag")O("dragend",{originalEvent:n,direction:u,distance:s,angle:o});else if(c=="transform"){var d=a.center.x-a.startCenter.x,v=a.center.y-a.startCenter.y;O("transformend",{originalEvent:n,position:a.center,scale:L(a.start,a.move),rotation:A(a.start,a.move),distance:s,distanceX:d,distanceY:v}),T(n)===1&&(_(),m(),i=!1)}else x&&D.tap(b);h=c,O("release",{originalEvent:n,gesture:c,position:a.move||a.start}),i&&_()}}function H(t){B(e,t.relatedTarget)||P(t)}function B(e,t){!t&&window.event&&window.event.toElement&&(t=window.event.toElement);if(e===t)return!0;if(t){var n=t.parentNode;while(n!==null){if(n===e)return!0;n=n.parentNode}}return!1}function j(e,t){var n={};if(!t)return e;for(var r in e)r in t?n[r]=t[r]:n[r]=e[r];return n}function F(e){return Object.prototype.toString.call(e)=="[object Function]"}function I(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.addEventListener?e.addEventListener(t[r],n,!1):document.attachEvent&&e.attachEvent("on"+t[r],n)}function q(e,t,n){t=t.split(" ");for(var r=0,i=t.length;r<i;r++)e.removeEventListener?e.removeEventListener(t[r],n,!1):document.detachEvent&&e.detachEvent("on"+t[r],n)}var r=this,i={prevent_default:!1,css_hacks:!0,swipe:!0,swipe_time:200,swipe_min_distance:20,drag:!0,drag_vertical:!0,drag_horizontal:!0,drag_min_distance:20,transform:!0,scale_treshold:.1,rotation_treshold:15,tap:!0,tap_double:!0,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:!0,hold_timeout:500};t=j(i,t),function(){if(!t.css_hacks)return!1;var n=["webkit","moz","ms","o",""],r={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"},i="";for(var s=0;s<n.length;s++)for(var o in r)i=o,n[s]&&(i=n[s]+i.substring(0,1).toUpperCase()+i.substring(1)),e.style[i]=r[o]}();var s=0,o=0,u=0,a={},f=0,l=!1,c=null,h=null,p=null,d={x:0,y:0},v=null,m=null,g={},y=!1,b,w,E,S="ontouchstart"in window,x=!1;this.option=function(e,r){return r!==n&&(t[e]=r),t[e]},this.getDirectionFromAngle=function(e){var t={down:e>=45&&e<135,left:e>=135||e<=-135,up:e<-45&&e>-135,right:e>=-45&&e<=45},n,r;for(r in t)if(t[r]){n=r;break}return n},this.destroy=function(){S?q(e,"touchstart touchmove touchend touchcancel",P):(q(e,"mouseup mousedown mousemove",P),q(e,"mouseout",H))};var D={hold:function(e){t.hold&&(c="hold",clearTimeout(m),m=setTimeout(function(){c=="hold"&&O("hold",{originalEvent:e,position:a.start})},t.hold_timeout))},swipe:function(e){if(!a.move||c==="transform")return;var n=a.move[0].x-a.start[0].x,i=a.move[0].y-a.start[0].y;s=Math.sqrt(n*n+i*i);var f=(new Date).getTime(),l=f-p;if(t.swipe&&t.swipe_time>l&&s>t.swipe_min_distance){o=C(a.start[0],a.move[0]),u=r.getDirectionFromAngle(o),c="swipe";var h={x:a.move[0].x-g.left,y:a.move[0].y-g.top},d={originalEvent:e,position:h,direction:u,distance:s,distanceX:n,distanceY:i,angle:o};O("swipe",d)}},drag:function(e){var n=a.move[0].x-a.start[0].x,i=a.move[0].y-a.start[0].y;s=Math.sqrt(n*n+i*i);if(t.drag&&s>t.drag_min_distance||c=="drag"){o=C(a.start[0],a.move[0]),u=r.getDirectionFromAngle(o);var f=u=="up"||u=="down";if((f&&!t.drag_vertical||!f&&!t.drag_horizontal)&&s>t.drag_min_distance)return;c="drag";var h={x:a.move[0].x-g.left,y:a.move[0].y-g.top},p={originalEvent:e,position:h,direction:u,distance:s,distanceX:n,distanceY:i,angle:o};l&&(O("dragstart",p),l=!1),O("drag",p),M(e)}},transform:function(e){if(t.transform){var n=T(e);if(n!==2)return!1;var r=A(a.start,a.move),i=L(a.start,a.move);if(c==="transform"||Math.abs(1-i)>t.scale_treshold||Math.abs(r)>t.rotation_treshold){c="transform",a.center={x:(a.move[0].x+a.move[1].x)/2-g.left,y:(a.move[0].y+a.move[1].y)/2-g.top},l&&(a.startCenter=a.center);var o=a.center.x-a.startCenter.x,u=a.center.y-a.startCenter.y;s=Math.sqrt(o*o+u*u);var f={originalEvent:e,position:a.center,scale:i,rotation:r,distance:s,distanceX:o,distanceY:u};return l&&(O("transformstart",f),l=!1),O("transform",f),M(e),!0}}return!1},tap:function(e){var n=(new Date).getTime(),r=n-p;if(t.hold&&!(t.hold&&t.hold_timeout>r))return;var i=function(){if(d&&t.tap_double&&h=="tap"&&a.start&&p-v<t.tap_max_interval){var e=Math.abs(d[0].x-a.start[0].x),n=Math.abs(d[0].y-a.start[0].y);return d&&a.start&&Math.max(e,n)<t.tap_double_distance}return!1}();if(i)c="double_tap",v=null,O("doubletap",{originalEvent:e,position:a.start}),M(e);else{var o=a.move?Math.abs(a.move[0].x-a.start[0].x):0,u=a.move?Math.abs(a.move[0].y-a.start[0].y):0;s=Math.max(o,u),s<t.tap_max_distance&&(c="tap",v=n,d=a.start,t.tap&&(O("tap",{originalEvent:e,position:a.start}),M(e)))}}};S?I(e,"touchstart touchmove touchend touchcancel",P):(I(e,"mouseup mousedown mousemove",P),I(e,"mouseout",H))}define("bkwld/console",["require"],function(e){var t=!1;typeof window.console=="undefined"&&(window.console={},t?(window.console.log=function(e){window.alert(e)},window.console.debug=function(e){window.alert(e)}):(window.console.log=function(){},window.console.debug=function(){}))}),define("bkwld/csrf",["require","jquery"],function(e){var t=e("jquery"),n=t('meta[name="csrf"]').attr("content");if(!n)return;t.ajaxPrefilter(function(e){var t=e.headers||{};t["x-csrf"]=n,e.headers=t})}),function(){function X(e,t,n){var r=(n||0)-1,i=e?e.length:0;while(++r<i)if(e[r]===t)return r;return-1}function V(e,t){var n=typeof t;e=e.cache;if(n=="boolean"||t==null)return e[t]?0:-1;n!="number"&&n!="string"&&(n="object");var r=n=="number"?t:s+t;return e=(e=e[n])&&e[r],n=="object"?e&&X(e,t)>-1?0:-1:e?0:-1}function $(e){var t=this.cache,n=typeof e;if(n=="boolean"||e==null)t[e]=!0;else{n!="number"&&n!="string"&&(n="object");var r=n=="number"?e:s+e,i=t[n]||(t[n]={});n=="object"?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function J(e){return e.charCodeAt(0)}function K(e,t){var n=e.criteria,r=t.criteria,i=-1,s=n.length;while(++i<s){var o=n[i],u=r[i];if(o!==u){if(o>u||typeof o=="undefined")return 1;if(o<u||typeof u=="undefined")return-1}}return e.index-t.index}function Q(e){var t=-1,n=e.length,r=e[0],i=e[n/2|0],s=e[n-1];if(r&&typeof r=="object"&&i&&typeof i=="object"&&s&&typeof s=="object")return!1;var o=Z();o["false"]=o["null"]=o["true"]=o["undefined"]=!1;var u=Z();u.array=e,u.cache=o,u.push=$;while(++t<n)u.push(e[t]);return u}function G(e){return"\\"+I[e]}function Y(){return t.pop()||[]}function Z(){return n.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,value:null}}function et(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function tt(e){e.length=0,t.length<u&&t.push(e)}function nt(e){var t=e.cache;t&&nt(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,n.length<u&&n.push(e)}function rt(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,i=n-t||0,s=Array(i<0?0:i);while(++r<i)s[r]=e[t+r];return s}function it(t){function It(e){return e&&typeof e=="object"&&!cn(e)&&Et.call(e,"__wrapped__")?e:new qt(e)}function qt(e,t){this.__chain__=!!t,this.__wrapped__=e}function zt(e){function i(){if(n){var e=rt(n);St.apply(e,arguments)}if(this instanceof i){var s=Xt(t.prototype),o=t.apply(s,e||arguments);return zn(o)?o:s}return t.apply(r,e||arguments)}var t=e[0],n=e[2],r=e[4];return un(i,e),i}function Wt(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}var o=zn(e);if(!o)return e;var u=dt.call(e);if(!P[u]||!Rt.nodeClass&&et(e))return e;var a=jt[u];switch(u){case N:case C:return new a(+e);case O:case D:return new a(e);case _:return s=a(e.source,p.exec(e)),s.lastIndex=e.lastIndex,s}var f=cn(e);if(t){var l=!r;r||(r=Y()),i||(i=Y());var c=r.length;while(c--)if(r[c]==e)return i[c];s=f?a(e.length):{}}else s=f?rt(e):Sn({},e);return f&&(Et.call(e,"index")&&(s.index=e.index),Et.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(f?En:Mn)(e,function(e,o){s[o]=Wt(e,t,n,r,i)}),l&&(tt(r),tt(i)),s):s}function Xt(e,t){return zn(e)?Lt(e):{}}function Vt(e,t,n){if(typeof e!="function")return mi;if(typeof t!="undefined"&&"prototype"in e){var r=e.__bindData__;if(typeof r=="undefined"){Rt.funcNames&&(r=!e.name),r=r||!Rt.funcDecomp;if(!r){var i=bt.call(e);Rt.funcNames||(r=!d.test(i)),r||(r=y.test(i),un(e,r))}}if(r===!1||r!==!0&&r[1]&1)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Zr(e,t)}return e}function $t(e){function h(){var e=u?s:this;if(r){var p=rt(r);St.apply(p,arguments)}if(i||f){p||(p=rt(arguments)),i&&St.apply(p,i);if(f&&p.length<o)return n|=16,$t([t,l?n:n&-4,p,null,s,o])}p||(p=arguments),a&&(t=e[c]);if(this instanceof h){e=Xt(t.prototype);var d=t.apply(e,p);return zn(d)?d:e}return t.apply(e,p)}var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=n&1,a=n&2,f=n&4,l=n&8,c=t;return un(h,e),h}function Jt(e,t){var n=-1,r=sn(),i=e?e.length:0,s=i>=o&&r===X,u=[];if(s){var a=Q(t);a?(r=V,t=a):s=!1}while(++n<i){var f=e[n];r(t,f)<0&&u.push(f)}return s&&nt(t),u}function Kt(e,t,n,r){var i=(r||0)-1,s=e?e.length:0,o=[];while(++i<s){var u=e[i];if(u&&typeof u=="object"&&typeof u.length=="number"&&(cn(u)||ln(u))){t||(u=Kt(u,t,n));var a=-1,f=u.length,l=o.length;o.length+=f;while(++a<f)o[l++]=u[a]}else n||o.push(u)}return o}function Qt(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return e!==0||1/e==1/t;var u=typeof e,a=typeof t;if(e===e&&(!e||!F[u])&&(!t||!F[a]))return!1;if(e==null||t==null)return e===t;var f=dt.call(e),l=dt.call(t);f==x&&(f=M),l==x&&(l=M);if(f!=l)return!1;switch(f){case N:case C:return+e==+t;case O:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case _:case D:return e==ut(t)}var c=f==T;if(!c){var h=Et.call(e,"__wrapped__"),p=Et.call(t,"__wrapped__");if(h||p)return Qt(h?e.__wrapped__:e,p?t.__wrapped__:t,n,r,i,s);if(f!=M||!Rt.nodeClass&&(et(e)||et(t)))return!1;var d=!Rt.argsObject&&ln(e)?$:e.constructor,v=!Rt.argsObject&&ln(t)?$:t.constructor;if(d!=v&&!(Un(d)&&d instanceof d&&Un(v)&&v instanceof v)&&"constructor"in e&&"constructor"in t)return!1}var m=!i;i||(i=Y()),s||(s=Y());var g=i.length;while(g--)if(i[g]==e)return s[g]==t;var y=0;o=!0,i.push(e),s.push(t);if(c){g=e.length,y=t.length,o=y==g;if(o||r)while(y--){var b=g,w=t[y];if(r){while(b--)if(o=Qt(e[b],w,n,r,i,s))break}else if(!(o=Qt(e[y],w,n,r,i,s)))break}}else An(t,function(t,u,a){if(Et.call(a,u))return y++,o=Et.call(e,u)&&Qt(e[u],t,n,r,i,s)}),o&&!r&&An(e,function(e,t,n){if(Et.call(n,t))return o=--y>-1});return i.pop(),s.pop(),m&&(tt(i),tt(s)),o}function Gt(e,t,n,r,i){(cn(t)?cr:Mn)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=cn(t))||$n(t))){var l=r.length;while(l--)if(o=r[l]==t){f=i[l];break}if(!o){var c;if(n){a=n(f,t);if(c=typeof a!="undefined")f=a}c||(f=u?cn(f)?f:[]:$n(f)?f:{}),r.push(t),i.push(f),c||Gt(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function Yt(e,t){return e+yt(Bt()*(t-e+1))}function Zt(e,t,n){var r=-1,i=sn(),s=e?e.length:0,u=[],a=!t&&s>=o&&i===X,f=n||a?Y():u;if(a){var l=Q(f);i=V,f=l}while(++r<s){var c=e[r],h=n?n(c,r,e):c;if(t?!r||f[f.length-1]!==h:i(f,h)<0)(n||a)&&f.push(h),u.push(c)}return a?(tt(f.array),nt(f)):n&&tt(f),u}function en(e){return function(t,n,r){var i={};n=It.createCallback(n,r,3);if(cn(t)){var s=-1,o=t.length;while(++s<o){var u=t[s];e(i,u,n(u,s,t),t)}}else En(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function tn(e,t,n,r,i,s){var o=t&1,u=t&2,a=t&4,f=t&8,l=t&16,c=t&32;if(!u&&!Un(e))throw new at;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var h=e&&e.__bindData__;if(h&&h!==!0)return h=rt(h),h[2]&&(h[2]=rt(h[2])),h[3]&&(h[3]=rt(h[3])),o&&!(h[1]&1)&&(h[4]=i),!o&&h[1]&1&&(t|=8),a&&!(h[1]&4)&&(h[5]=s),l&&St.apply(h[2]||(h[2]=[]),n),c&&Ct.apply(h[3]||(h[3]=[]),r),h[1]|=t,tn.apply(null,h);var p=t==1||t===17?zt:$t;return p([e,t,n,r,i,s])}function nn(){j.shadowedProps=E,j.array=j.bottom=j.loop=j.top="",j.init="iterable",j.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)j[n]=e[n];var r=j.args;j.firstArg=/^[^,]+/.exec(r)[0];var s=U("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+Ut(j)+"\n}");return s(Vt,L,lt,Et,i,ln,cn,Kn,j.keys,ct,F,Ft,D,ht,dt)}function rn(e){return gn[e]}function sn(){var e=(e=It.indexOf)===Br?X:e;return e}function on(e){return typeof e=="function"&&vt.test(e)}function an(e){var t,n;return!e||dt.call(e)!=M||(t=e.constructor,Un(t)&&!(t instanceof t))||!Rt.argsClass&&ln(e)||!Rt.nodeClass&&et(e)?!1:Rt.ownLast?(An(e,function(e,t,r){return n=Et.call(r,t),!1}),n!==!1):(An(e,function(e,t){n=t}),typeof n=="undefined"||Et.call(e,n))}function fn(e){return yn[e]}function ln(e){return e&&typeof e=="object"&&typeof e.length=="number"&&dt.call(e)==x||!1}function xn(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),Wt(e,t,typeof n=="function"&&Vt(n,r,1))}function Tn(e,t,n){return Wt(e,!0,typeof t=="function"&&Vt(t,n,1))}function Nn(e,t){var n=Xt(e);return t?Sn(n,t):n}function kn(e,t,n){var r;return t=It.createCallback(t,n,3),Mn(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ln(e,t,n){var r;return t=It.createCallback(t,n,3),_n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function On(e,t,n){var r=[];An(e,function(e,t){r.push(t,e)});var i=r.length;t=Vt(t,n,3);while(i--)if(t(r[i--],r[i],e)===!1)break;return e}function _n(e,t,n){var r=pn(e),i=r.length;t=Vt(t,n,3);while(i--){var s=r[i];if(t(e[s],s,e)===!1)break}return e}function Dn(e){var t=[];return An(e,function(e,n){Un(e)&&t.push(n)}),t.sort()}function Pn(e,t){return e?Et.call(e,t):!1}function Hn(e){var t=-1,n=pn(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function Bn(e){return e===!0||e===!1||e&&typeof e=="object"&&dt.call(e)==N||!1}function jn(e){return e&&typeof e=="object"&&dt.call(e)==C||!1}function Fn(e){return e&&e.nodeType===1||!1}function In(e){var t=!0;if(!e)return t;var n=dt.call(e),r=e.length;return n==T||n==D||(Rt.argsClass?n==x:ln(e))||n==M&&typeof r=="number"&&Un(e.splice)?!r:(Mn(e,function(){return t=!1}),t)}function qn(e,t,n,r){return Qt(e,t,typeof n=="function"&&Vt(n,r,2))}function Rn(e){return Ot(e)&&!Mt(parseFloat(e))}function Un(e){return typeof e=="function"}function zn(e){return!!e&&!!F[typeof e]}function Wn(e){return Vn(e)&&e!=+e}function Xn(e){return e===null}function Vn(e){return typeof e=="number"||e&&typeof e=="object"&&dt.call(e)==O||!1}function Jn(e){return e&&F[typeof e]&&dt.call(e)==_||!1}function Kn(e){return typeof e=="string"||e&&typeof e=="object"&&dt.call(e)==D||!1}function Qn(e){return typeof e=="undefined"}function Gn(e,t,n){var r={};return t=It.createCallback(t,n,3),Mn(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Yn(e){var t=arguments,n=2;if(!zn(e))return e;typeof t[2]!="number"&&(n=t.length);if(n>3&&typeof t[n-2]=="function")var r=Vt(t[--n-1],t[n--],2);else n>2&&typeof t[n-1]=="function"&&(r=t[--n]);var i=rt(arguments,1,n),s=-1,o=Y(),u=Y();while(++s<n)Gt(e,i[s],r,o,u);return tt(o),tt(u),e}function Zn(e,t,n){var r={};if(typeof t!="function"){var i=[];An(e,function(e,t){i.push(t)}),i=Jt(i,Kt(arguments,!0,!1,1));var s=-1,o=i.length;while(++s<o){var u=i[s];r[u]=e[u]}}else t=It.createCallback(t,n,3),An(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function er(e){var t=-1,r=pn(e),i=r.length,s=n(i);while(++t<i){var o=r[t];s[t]=[o,e[o]]}return s}function tr(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=Kt(arguments,!0,!1,1),o=zn(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=It.createCallback(t,n,3),An(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function nr(e,t,n,r){var i=cn(e);if(n==null)if(i)n=[];else{var s=e&&e.constructor,o=s&&s.prototype;n=Xt(o)}return t&&(t=It.createCallback(t,r,4),(i?En:Mn)(e,function(e,r,i){return t(n,e,r,i)})),n}function rr(e){var t=-1,r=pn(e),i=r.length,s=n(i);while(++t<i)s[t]=e[r[t]];return s}function ir(e){var t=arguments,r=-1,i=Kt(t,!0,!1,1),s=t[2]&&t[2][t[1]]===e?1:i.length,o=n(s);Rt.unindexedChars&&Kn(e)&&(e=e.split(""));while(++r<s)o[r]=e[i[r]];return o}function sr(e,t,n){var r=-1,i=sn(),s=e?e.length:0,o=!1;return n=(n<0?Dt(0,s+n):n)||0,cn(e)?o=i(e,t,n)>-1:typeof s=="number"?o=(Kn(e)?e.indexOf(t,n):i(e,t,n))>-1:En(e,function(e){if(++r>=n)return!(o=e===t)}),o}function ur(e,t,n){var r=!0;t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s)if(!(r=!!t(e[i],i,e)))break}else En(e,function(e,n,i){return r=!!t(e,n,i)});return r}function ar(e,t,n){var r=[];t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else En(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function fr(e,t,n){t=It.createCallback(t,n,3);if(!cn(e)){var o;return En(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function lr(e,t,n){var r;return t=It.createCallback(t,n,3),hr(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r}function cr(e,t,n){if(t&&typeof n=="undefined"&&cn(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else En(e,t,n);return e}function hr(e,t,n){var r=e,i=e?e.length:0;t=t&&typeof n=="undefined"?t:Vt(t,n,3);if(cn(e)){while(i--)if(t(e[i],i,e)===!1)break}else{if(typeof i!="number"){var s=pn(e);i=s.length}else Rt.unindexedChars&&Kn(e)&&(r=e.split(""));En(e,function(e,n,o){return n=s?s[--i]:--i,t(r[n],n,o)})}return e}function vr(e,t){var r=rt(arguments,2),i=-1,s=typeof t=="function",o=e?e.length:0,u=n(typeof o=="number"?o:0);return cr(e,function(e){u[++i]=(s?t:e[t]).apply(e,r)}),u}function mr(e,t,r){var i=-1,s=e?e.length:0,o=n(typeof s=="number"?s:0);t=It.createCallback(t,r,3);if(cn(e))while(++i<s)o[i]=t(e[i],i,e);else En(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function gr(e,t,n){var r=-Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);if(t==null&&cn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=t==null&&Kn(e)?J:It.createCallback(t,n,3),En(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function yr(e,t,n){var r=Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);if(t==null&&cn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=t==null&&Kn(e)?J:It.createCallback(t,n,3),En(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function wr(e,t,n,r){var i=arguments.length<3;t=It.createCallback(t,r,4);if(cn(e)){var s=-1,o=e.length;i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else En(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Er(e,t,n,r){var i=arguments.length<3;return t=It.createCallback(t,r,4),hr(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Sr(e,t,n){return t=It.createCallback(t,n,3),ar(e,function(e,n,r){return!t(e,n,r)})}function xr(t,n,r){t&&typeof t.length!="number"?t=rr(t):Rt.unindexedChars&&Kn(t)&&(t=t.split(""));if(n==null||r)return t?t[Yt(0,t.length-1)]:e;var i=Tr(t);return i.length=Pt(Dt(0,n),i.length),i}function Tr(e){var t=-1,r=e?e.length:0,i=n(typeof r=="number"?r:0);return cr(e,function(e){var n=Yt(0,++t);i[t]=i[n],i[n]=e}),i}function Nr(e){var t=e?e.length:0;return typeof t=="number"?t:pn(e).length}function Cr(e,t,n){var r;t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s)if(r=t(e[i],i,e))break}else En(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function kr(e,t,r){var i=-1,s=cn(t),o=e?e.length:0,u=n(typeof o=="number"?o:0);s||(t=It.createCallback(t,r,3)),cr(e,function(e,n,r){var o=u[++i]=Z();s?o.criteria=mr(t,function(t){return e[t]}):(o.criteria=Y())[0]=t(e,n,r),o.index=i,o.value=e}),o=u.length,u.sort(K);while(o--){var a=u[o];u[o]=a.value,s||tt(a.criteria),nt(a)}return u}function Lr(e){return e&&typeof e.length=="number"?Rt.unindexedChars&&Kn(e)?e.split(""):rt(e):rr(e)}function Or(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function Mr(e){return Jt(e,Kt(arguments,!0,!0,1))}function _r(e,t,n){var r=-1,i=e?e.length:0;t=It.createCallback(t,n,3);while(++r<i)if(t(e[r],r,e))return r;return-1}function Dr(e,t,n){var r=e?e.length:0;t=It.createCallback(t,n,3);while(r--)if(t(e[r],r,e))return r;return-1}function Pr(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=-1;n=It.createCallback(n,r,3);while(++o<s&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[0]:e}return rt(t,0,Pt(Dt(0,i),s))}function Hr(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(e=mr(e,n,r)),Kt(e,t)}function Br(e,t,n){if(typeof n=="number"){var r=e?e.length:0;n=n<0?Dt(0,r+n):n||0}else if(n){var i=Xr(e,t);return e[i]===t?i:-1}return X(e,t,n)}function jr(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=It.createCallback(t,n,3);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return rt(e,0,Pt(Dt(0,i-r),i))}function Fr(){var e=[],t=-1,n=arguments.length,r=Y(),i=sn(),s=i===X,u=Y();while(++t<n){var a=arguments[t];if(cn(a)||ln(a))e.push(a),r.push(s&&a.length>=o&&Q(t?e[t]:u))}var f=e[0],l=-1,c=f?f.length:0,h=[];e:while(++l<c){var p=r[0];a=f[l];if((p?V(p,a):i(u,a))<0){t=n,(p||u).push(a);while(--t){p=r[t];if((p?V(p,a):i(e[t],a))<0)continue e}h.push(a)}}while(n--)p=r[n],p&&nt(p);return tt(r),tt(u),h}function Ir(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=s;n=It.createCallback(n,r,3);while(o--&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[s-1]:e}return rt(t,Dt(0,s-i))}function qr(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?Dt(0,r+n):Pt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Rr(e){var t=arguments,n=0,r=t.length,i=e?e.length:0;while(++n<r){var s=-1,o=t[n];while(++s<i)e[s]===o&&(Nt.call(e,s--,1),i--)}return e}function Ur(e,t,r){e=+e||0,r=typeof r=="number"?r:+r||1,t==null&&(t=e,e=0);var i=-1,s=Dt(0,mt((t-e)/(r||1))),o=n(s);while(++i<s)o[i]=e,e+=r;return o}function zr(e,t,n){var r=-1,i=e?e.length:0,s=[];t=It.createCallback(t,n,3);while(++r<i){var o=e[r];t(o,r,e)&&(s.push(o),Nt.call(e,r--,1),i--)}return s}function Wr(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=It.createCallback(t,n,3);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:Dt(0,t);return rt(e,r)}function Xr(e,t,n,r){var i=0,s=e?e.length:i;n=n?It.createCallback(n,r,1):mi,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function Vr(){return Zt(Kt(arguments,!0,!0))}function $r(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(n=It.createCallback(n,r,3)),Zt(e,t,n)}function Jr(e){return Jt(e,rt(arguments,1))}function Kr(){var e=-1,t=arguments.length;while(++e<t){var n=arguments[e];if(cn(n)||ln(n))var r=r?Zt(Jt(r,n).concat(Jt(n,r))):n}return r||[]}function Qr(){var e=arguments.length>1?arguments:arguments[0],t=-1,r=e?gr(br(e,"length")):0,i=n(r<0?0:r);while(++t<r)i[t]=br(e,t);return i}function Gr(e,t){var n=-1,r=e?e.length:0,i={};!t&&r&&!cn(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Yr(e,t){if(!Un(t))throw new at;return function(){if(--e<1)return t.apply(this,arguments)}}function Zr(e,t){return arguments.length>2?tn(e,17,rt(arguments,2),null,t):tn(e,1,null,null,t)}function ei(e){var t=arguments.length>1?Kt(arguments,!0,!1,1):Dn(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=tn(e[i],1,null,null,e)}return e}function ti(e,t){return arguments.length>2?tn(t,19,rt(arguments,2),null,e):tn(t,3,null,null,e)}function ni(){var e=arguments,t=e.length;while(t--)if(!Un(e[t]))throw new at;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function ri(e,t){return t=typeof t=="number"?t:+t||e.length,tn(e,4,null,null,null,t)}function ii(t,n,r){var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(!Un(t))throw new at;n=Dt(0,n)||0;if(r===!0){var d=!0;p=!1}else zn(r)&&(d=r.leading,h="maxWait"in r&&(Dt(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var v=function(){var r=n-(wi()-u);if(r<=0){s&&gt(s);var h=l;s=f=l=e,h&&(c=wi(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=Tt(v,r)},m=function(){f&&gt(f),s=f=l=e;if(p||h!==n)c=wi(),o=t.apply(a,i),!f&&!s&&(i=a=null)};return function(){i=arguments,u=wi(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),g=r<=0;g?(s&&(s=gt(s)),c=u,o=t.apply(a,i)):s||(s=Tt(m,r))}return g&&f?f=gt(f):!f&&n!==h&&(f=Tt(v,n)),e&&(g=!0,o=t.apply(a,i)),g&&!f&&!s&&(i=a=null),o}}function si(t){if(!Un(t))throw new at;var n=rt(arguments,1);return Tt(function(){t.apply(e,n)},1)}function oi(t,n){if(!Un(t))throw new at;var r=rt(arguments,2);return Tt(function(){t.apply(e,r)},n)}function ui(e,t){if(!Un(e))throw new at;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):s+arguments[0];return Et.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function ai(e){var t,n;if(!Un(e))throw new at;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function fi(e){return tn(e,16,rt(arguments,1))}function li(e){return tn(e,32,null,rt(arguments,1))}function ci(e,t,n){var r=!0,i=!0;if(!Un(e))throw new at;return n===!1?r=!1:zn(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),H.leading=r,H.maxWait=t,H.trailing=i,ii(e,t,H)}function hi(e,t){return tn(t,16,[e])}function pi(e){return function(){return e}}function di(e,t,n){var r=typeof e;if(e==null||r=="function")return Vt(e,t,n);if(r!="object")return Si(e);var i=pn(e),s=i[0],o=e[s];return i.length==1&&o===o&&!zn(o)?function(e){var t=e[s];return o===t&&(o!==0||1/o==1/t)}:function(t){var n=i.length,r=!1;while(n--)if(!(r=Qt(t[i[n]],e[i[n]],null,!0)))break;return r}}function vi(e){return e==null?"":ut(e).replace(wn,rn)}function mi(e){return e}function gi(e,t,n){var r=!0,i=t&&Dn(t);if(!t||!n&&!i.length)n==null&&(n=t),s=qt,t=e,e=It,i=Dn(t);n===!1?r=!1:zn(n)&&"chain"in n&&(r=n.chain);var s=e,o=Un(s);cr(i,function(n){var i=e[n]=t[n];o&&(s.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,o=[n];St.apply(o,arguments);var u=i.apply(e,o);if(r||t){if(n===u&&zn(u))return this;u=new s(u),u.__chain__=t}return u})})}function yi(){return t._=pt,this}function bi(){}function Si(e){return function(t){return t[e]}}function xi(e,t,n){var r=e==null,i=t==null;n==null&&(typeof e=="boolean"&&i?(n=e,e=1):!i&&typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0;if(n||e%1||t%1){var s=Bt();return Pt(e+s*(t-e+parseFloat("1e-"+((s+"").length-1))),t)}return Yt(e,t)}function Ti(e,t){if(e){var n=e[t];return Un(n)?e[t]():n}}function Ni(t,n,r){var i=It.templateSettings;t=ut(t||""),r=Cn({},r,i);var s=Cn({},r.imports,i.imports),o=pn(s),u=rr(s),a,p=0,d=r.interpolate||g,m="__p += '",y=ot((r.escape||g).source+"|"+d.source+"|"+(d===v?h:g).source+"|"+(r.evaluate||g).source+"|$","g");t.replace(y,function(e,n,r,i,s,o){return r||(r=i),m+=t.slice(p,o).replace(b,G),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=o+e.length,e}),m+="';\n";var w=r.variable,E=w;E||(w="obj",m="with ("+w+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+w+") {\n"+(E?"":w+" || ("+w+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var x="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var T=U(o,"return "+m+x).apply(e,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Ci(e,t,r){e=(e=+e)>-1?e:0;var i=-1,s=n(e);t=Vt(t,r,1);while(++i<e)s[i]=t(i);return s}function ki(e){return e==null?"":ut(e).replace(bn,fn)}function Li(e){var t=++r;return ut(e==null?"":e)+t}function Ai(e){return e=new qt(e),e.__chain__=!0,e}function Oi(e,t){return t(e),e}function Mi(){return this.__chain__=!0,this}function _i(){return ut(this.__wrapped__)}function Di(){return this.__wrapped__}t=t?st.defaults(q.Object(),t,st.pick(q,w)):q;var n=t.Array,u=t.Boolean,I=t.Date,R=t.Error,U=t.Function,z=t.Math,W=t.Number,$=t.Object,ot=t.RegExp,ut=t.String,at=t.TypeError,ft=[],lt=R.prototype,ct=$.prototype,ht=ut.prototype,pt=t._,dt=ct.toString,vt=ot("^"+ut(dt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mt=z.ceil,gt=t.clearTimeout,yt=z.floor,bt=U.prototype.toString,wt=on(wt=$.getPrototypeOf)&&wt,Et=ct.hasOwnProperty,St=ft.push,xt=ct.propertyIsEnumerable,Tt=t.setTimeout,Nt=ft.splice,Ct=ft.unshift,kt=function(){try{var e={},t=on(t=$.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Lt=on(Lt=$.create)&&Lt,At=on(At=n.isArray)&&At,Ot=t.isFinite,Mt=t.isNaN,_t=on(_t=$.keys)&&_t,Dt=z.max,Pt=z.min,Ht=t.parseInt,Bt=z.random,jt={};jt[T]=n,jt[N]=u,jt[C]=I,jt[A]=U,jt[M]=$,jt[O]=W,jt[_]=ot,jt[D]=ut;var Ft={};Ft[T]=Ft[C]=Ft[O]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ft[N]=Ft[D]={constructor:!0,toString:!0,valueOf:!0},Ft[L]=Ft[A]=Ft[_]={constructor:!0,toString:!0},Ft[M]={constructor:!0},function(){var e=E.length;while(e--){var t=E[e];for(var n in Ft)Et.call(Ft,n)&&!Et.call(Ft[n],t)&&(Ft[n][t]=!1)}}(),qt.prototype=It.prototype;var Rt=It.support={};(function(){var e=function(){this.x=1},r={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var s in new e)i.push(s);for(s in arguments);Rt.argsClass=dt.call(arguments)==x,Rt.argsObject=arguments.constructor==$&&!(arguments instanceof n),Rt.enumErrorProps=xt.call(lt,"message")||xt.call(lt,"name"),Rt.enumPrototypes=xt.call(e,"prototype"),Rt.funcDecomp=!on(t.WinRTError)&&y.test(it),Rt.funcNames=typeof U.name=="string",Rt.nonEnumArgs=s!=0,Rt.nonEnumShadows=!/valueOf/.test(i),Rt.ownLast=i[0]!="x",Rt.spliceObjects=(ft.splice.call(r,0,1),!r[0]),Rt.unindexedChars="x"[0]+$("x")[0]!="xx";try{Rt.nodeClass=dt.call(document)!=M||!!({toString:0}+"")}catch(o){Rt.nodeClass=!0}})(1),It.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:It}};var Ut=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",Rt.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):Rt.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),Rt.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),Rt.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];Rt.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),Rt.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))');if(e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else{t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ";if(Rt.nonEnumShadows){t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}}if(e.array||Rt.nonEnumArgs)t+="\n}";return t+=e.bottom+";\nreturn result",t};Lt||(Xt=function(){function e(){}return function(n){if(zn(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var un=kt?function(e,t){B.value=t,kt(e,"__bindData__",B)}:bi;Rt.argsClass||(ln=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Et.call(e,"callee")&&!xt.call(e,"callee")||!1});var cn=At||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&dt.call(e)==T||!1},hn=nn({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pn=_t?function(e){return zn(e)?Rt.enumPrototypes&&typeof e=="function"||Rt.nonEnumArgs&&e.length&&ln(e)?hn(e):_t(e):[]}:hn,dn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pn,loop:"if (callback(iterable[index], index, collection) === false) return result"},vn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pn,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},mn={top:"if (!objectTypes[typeof iterable]) return result;\n"+dn.top,array:!1},gn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yn=Hn(gn),bn=ot("("+pn(yn).join("|")+")","g"),wn=ot("["+pn(gn).join("")+"]","g"),En=nn(dn),Sn=nn(vn,{top:vn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Cn=nn(vn),An=nn(dn,mn,{useHas:!1}),Mn=nn(dn,mn);Un(/x/)&&(Un=function(e){return typeof e=="function"&&dt.call(e)==A});var $n=wt?function(e){if(!e||dt.call(e)!=M||!Rt.argsClass&&ln(e))return!1;var t=e.valueOf,n=on(t)&&(n=wt(t))&&wt(n);return n?e==n||wt(e)==n:an(e)}:an,or=en(function(e,t,n){Et.call(e,n)?e[n]++:e[n]=1}),pr=en(function(e,t,n){(Et.call(e,n)?e[n]:e[n]=[]).push(t)}),dr=en(function(e,t,n){e[n]=t}),br=mr,Ar=ar,wi=on(wi=I.now)&&wi||function(){return(new I).getTime()},Ei=Ht(a+"08")==8?Ht:function(e,t){return Ht(Kn(e)?e.replace(m,""):e,t||0)};return It.after=Yr,It.assign=Sn,It.at=ir,It.bind=Zr,It.bindAll=ei,It.bindKey=ti,It.chain=Ai,It.compact=Or,It.compose=ni,It.constant=pi,It.countBy=or,It.create=Nn,It.createCallback=di,It.curry=ri,It.debounce=ii,It.defaults=Cn,It.defer=si,It.delay=oi,It.difference=Mr,It.filter=ar,It.flatten=Hr,It.forEach=cr,It.forEachRight=hr,It.forIn=An,It.forInRight=On,It.forOwn=Mn,It.forOwnRight=_n,It.functions=Dn,It.groupBy=pr,It.indexBy=dr,It.initial=jr,It.intersection=Fr,It.invert=Hn,It.invoke=vr,It.keys=pn,It.map=mr,It.mapValues=Gn,It.max=gr,It.memoize=ui,It.merge=Yn,It.min=yr,It.omit=Zn,It.once=ai,It.pairs=er,It.partial=fi,It.partialRight=li,It.pick=tr,It.pluck=br,It.property=Si,It.pull=Rr,It.range=Ur,It.reject=Sr,It.remove=zr,It.rest=Wr,It.shuffle=Tr,It.sortBy=kr,It.tap=Oi,It.throttle=ci,It.times=Ci,It.toArray=Lr,It.transform=nr,It.union=Vr,It.uniq=$r,It.values=rr,It.where=Ar,It.without=Jr,It.wrap=hi,It.xor=Kr,It.zip=Qr,It.zipObject=Gr,It.collect=mr,It.drop=Wr,It.each=cr,It.eachRight=hr,It.extend=Sn,It.methods=Dn,It.object=Gr,It.select=ar,It.tail=Wr,It.unique=$r,It.unzip=Qr,gi(It),It.clone=xn,It.cloneDeep=Tn,It.contains=sr,It.escape=vi,It.every=ur,It.find=fr,It.findIndex=_r,It.findKey=kn,It.findLast=lr,It.findLastIndex=Dr,It.findLastKey=Ln,It.has=Pn,It.identity=mi,It.indexOf=Br,It.isArguments=ln,It.isArray=cn,It.isBoolean=Bn,It.isDate=jn,It.isElement=Fn,It.isEmpty=In,It.isEqual=qn,It.isFinite=Rn,It.isFunction=Un,It.isNaN=Wn,It.isNull=Xn,It.isNumber=Vn,It.isObject=zn,It.isPlainObject=$n,It.isRegExp=Jn,It.isString=Kn,It.isUndefined=Qn,It.lastIndexOf=qr,It.mixin=gi,It.noConflict=yi,It.noop=bi,It.now=wi,It.parseInt=Ei,It.random=xi,It.reduce=wr,It.reduceRight=Er,It.result=Ti,It.runInContext=it,It.size=Nr,It.some=Cr,It.sortedIndex=Xr,It.template=Ni,It.unescape=ki,It.uniqueId=Li,It.all=ur,It.any=Cr,It.detect=fr,It.findWhere=fr,It.foldl=wr,It.foldr=Er,It.include=sr,It.inject=wr,gi(function(){var e={};return Mn(It,function(t,n){It.prototype[n]||(e[n]=t)}),e}(),!1),It.first=Pr,It.last=Ir,It.sample=xr,It.take=Pr,It.head=Pr,Mn(It,function(e,t){var n=t!=="sample";It.prototype[t]||(It.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return!i&&(t==null||r&&(!n||typeof t!="function"))?s:new qt(s,i)})}),It.VERSION="2.4.1",It.prototype.chain=Mi,It.prototype.toString=_i,It.prototype.value=Di,It.prototype.valueOf=Di,En(["join","pop","shift"],function(e){var t=ft[e];It.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new qt(n,e):n}}),En(["push","reverse","sort","unshift"],function(e){var t=ft[e];It.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),En(["concat","slice","splice"],function(e){var t=ft[e];It.prototype[e]=function(){return new qt(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Rt.spliceObjects||En(["pop","shift","splice"],function(e){var t=ft[e],n=e=="splice";It.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=t.apply(r,arguments);return r.length===0&&delete r[0],e||n?new qt(i,e):i}}),It}var e,t=[],n=[],r=0,i={},s=+(new Date)+"",o=75,u=40,a=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/\w*$/,d=/^\s*function[ \n\r\t]+\w/,v=/<%=([\s\S]+?)%>/g,m=RegExp("^["+a+"]*0+(?=.$)"),g=/($^)/,y=/\bthis\b/,b=/['\n\r\t\u2028\u2029\\]/g,w=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],E=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],S=0,x="[object Arguments]",T="[object Array]",N="[object Boolean]",C="[object Date]",L="[object Error]",A="[object Function]",O="[object Number]",M="[object Object]",_="[object RegExp]",D="[object String]",P={};P[A]=!1,P[x]=P[T]=P[N]=P[C]=P[O]=P[M]=P[_]=P[D]=!0;var H={leading:!1,maxWait:0,trailing:!1},B={configurable:!1,enumerable:!1,value:null,writable:!1},j={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},F={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},I={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},q=F[typeof window]&&window||this,R=F[typeof exports]&&exports&&!exports.nodeType&&exports,U=F[typeof module]&&module&&!module.nodeType&&module,z=U&&U.exports===R&&R,W=F[typeof global]&&global;W&&(W.global===W||W.window===W)&&(q=W);var st=it();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(q._=st,define("lodash",[],function(){return st})):R&&U?z?(U.exports=st)._=st:R._=st:q._=st}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),!function(e,t){typeof define=="function"?define("plugins/morpheus",t):typeof module!="undefined"?module.exports=t():this[e]=t()}("morpheus",function(){function E(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t);for(n=0;n<e.length;++n)if(e[n]===t)return n}function S(e){var t,n=w.length;s&&(e=i());for(t=n;t--;)w[t](e);w.length&&b(S)}function x(e){w.push(e)===1&&b(S)}function T(e){var t,n=E(w,e);n>=0&&(t=w.slice(n+1),w.length=n,w=w.concat(t))}function N(e,t){var n={},r;if(r=e.match(c))n.rotate=B(r[1],t?t.rotate:null);if(r=e.match(h))n.scale=B(r[1],t?t.scale:null);if(r=e.match(p))n.skewx=B(r[1],t?t.skewx:null),n.skewy=B(r[3],t?t.skewy:null);if(r=e.match(d))n.translatex=B(r[1],t?t.translatex:null),n.translatey=B(r[3],t?t.translatey:null);return n}function C(e){var t="";return"rotate"in e&&(t+="rotate("+e.rotate+"deg) "),"scale"in e&&(t+="scale("+e.scale+") "),"translatex"in e&&(t+="translate("+e.translatex+"px,"+e.translatey+"px) "),"skewx"in e&&(t+="skew("+e.skewx+"deg,"+e.skewy+"deg)"),t}function k(e,t,n){return"#"+(1<<24|e<<16|t<<8|n).toString(16).slice(1)}function L(e){var t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(t?k(t[1],t[2],t[3]):e).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function A(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function O(e){return typeof e=="function"}function M(e){return Math.sin(e*Math.PI/2)}function _(e,t,n,r,s,o){function d(e){var i=e-c;if(i>a||h)return o=isFinite(o)?o:1,h?p&&t(o):t(o),T(d),n&&n.apply(f);isFinite(o)?t(l*r(i/a)+s):t(r(i/a))}r=O(r)?r:j.easings[r]||M;var a=e||u,f=this,l=o-s,c=i(),h=0,p=0;return x(d),{stop:function(e){h=1,p=e,e||(n=null)}}}function D(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}function P(e,t,n){var r=[],i,s,o,u;for(i=0;i<6;i++)o=Math.min(15,parseInt(t.charAt(i),16)),u=Math.min(15,parseInt(n.charAt(i),16)),s=Math.floor((u-o)*e+o),s=s>15?15:s<0?0:s,r[i]=s.toString(16);return"#"+r.join("")}function H(e,t,n,r,i,s,o){if(i=="transform"){o={};for(var a in n[s][i])o[a]=a in r[s][i]?Math.round(((r[s][i][a]-n[s][i][a])*e+n[s][i][a])*u)/u:n[s][i][a];return o}return typeof n[s][i]=="string"?P(e,n[s][i],r[s][i]):(o=Math.round(((r[s][i]-n[s][i])*e+n[s][i])*u)/u,i in v||(o+=t[s][i]||"px"),o)}function B(e,t,n,r,i){return(n=f.exec(e))?(i=parseFloat(n[2]))&&t+(n[1]=="+"?1:-1)*i:parseFloat(e)}function j(e,t){var n=e?n=isFinite(e.length)?e:[e]:[],r,i=t.complete,s=t.duration,o=t.easing,u=t.bezier,f=[],c=[],h=[],p=[],d,v;u&&(d=t.left,v=t.top,delete t.right,delete t.bottom,delete t.left,delete t.top);for(r=n.length;r--;){f[r]={},c[r]={},h[r]={};if(u){var b=y(n[r],"left"),w=y(n[r],"top"),E=[B(O(d)?d(n[r]):d||0,parseFloat(b)),B(O(v)?v(n[r]):v||0,parseFloat(w))];p[r]=O(u)?u(n[r],E):u,p[r].push(E),p[r].unshift([parseInt(b,10),parseInt(w,10)])}for(var S in t){switch(S){case"complete":case"duration":case"easing":case"bezier":continue}var x=y(n[r],S),T,k=O(t[S])?t[S](n[r]):t[S];if(typeof k=="string"&&a.test(k)&&!a.test(x)){delete t[S];continue}f[r][S]=S=="transform"?N(x):typeof k=="string"&&a.test(k)?L(x).slice(1):parseFloat(x),c[r][S]=S=="transform"?N(k,f[r][S]):typeof k=="string"&&k.charAt(0)=="#"?L(k).slice(1):B(k,parseFloat(x)),typeof k=="string"&&(T=k.match(l))&&(h[r][S]=T[1])}}return _.apply(n,[s,function(e,i,s){for(r=n.length;r--;){u&&(s=D(p[r],e),n[r].style.left=s[0]+"px",n[r].style.top=s[1]+"px");for(var o in t)i=H(e,h,f,c,o,r),o=="transform"?n[r].style[m]=C(i):o=="opacity"&&!g?n[r].style.filter="alpha(opacity="+i*100+")":n[r].style[A(o)]=i}},i,o])}var e=document,t=window,n=t.performance,r=n&&(n.now||n.webkitNow||n.msNow||n.mozNow),i=r?function(){return r.call(n)}:function(){return+(new Date)},s=!1,o=e.documentElement,u=1e3,a=/^rgb\(|#/,f=/^([+\-])=([\d\.]+)/,l=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,c=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,h=/scale\(((?:[+\-]=)?([\d\.]+))\)/,p=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,d=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,v={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},m=function(){var t=e.createElement("a").style,n=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],r;for(r=0;r<n.length;r++)if(n[r]in t)return n[r]}(),g=function(){return typeof e.createElement("a").style.opacity!="undefined"}(),y=e.defaultView&&e.defaultView.getComputedStyle?function(t,n){n=n=="transform"?m:n,n=A(n);var r=null,i=e.defaultView.getComputedStyle(t,"");return i&&(r=i[n]),t.style[n]||r}:o.currentStyle?function(e,t){t=A(t);if(t=="opacity"){var n=100;try{n=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(r){try{n=e.filters("alpha").opacity}catch(i){}}return n/100}var s=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||s}:function(e,t){return e.style[A(t)]},b=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(e){t.setTimeout(function(){e(+(new Date))},17)}}();b(function(e){s=e>1e12!=i()>1e12});var w=[];return j.tween=_,j.getStyle=y,j.bezier=D,j.transform=m,j.parseTransform=N,j.formatTransform=C,j.easings={},j}),function(e,t){typeof define=="function"?define("plugins/easing",t):typeof module!="undefined"?module.exports=t:this[e]=t}("easing",{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-0.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e===1?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),jQuery(document).on("touchstart",function(){}),define("plugins/touch-fix",function(){}),!function(e,t){typeof define=="function"?define("plugins/bowser",t):typeof module!="undefined"&&module.exports?module.exports.browser=t():this[e]=t()}("bowser",function(){function m(){if(n)return{msie:t,version:e.match(/msie (\d+(\.\d+)?);/i)[1]};if(r)return{webkit:t,chrome:t,version:e.match(/chrome\/(\d+(\.\d+)?)/i)[1]};if(i)return{webkit:t,phantom:t,version:e.match(/phantomjs\/(\d+(\.\d+)+)/i)[1]};if(a)return{webkit:t,touchpad:t,version:e.match(/touchpad\/(\d+(\.\d+)?)/i)[1]};if(o||u)return v={webkit:t,mobile:t,ios:t,iphone:o,ipad:u},d.test(e)&&(v.version=e.match(d)[1]),v;if(f)return{webkit:t,android:t,mobile:t,version:e.match(d)[1]};if(s)return{webkit:t,safari:t,version:e.match(d)[1]};if(l)return{opera:t,version:e.match(d)[1]};if(h)return v={gecko:t,mozilla:t,version:e.match(/firefox\/(\d+(\.\d+)?)/i)[1]},c&&(v.firefox=t),v;if(p)return{seamonkey:t,version:e.match(/seamonkey\/(\d+(\.\d+)?)/i)[1]}}var e=navigator.userAgent,t=!0,n=/msie/i.test(e),r=/chrome/i.test(e),i=/phantom/i.test(e),s=/safari/i.test(e)&&!r&&!i,o=/iphone/i.test(e),u=/ipad/i.test(e),a=/touchpad/i.test(e),f=/android/i.test(e),l=/opera/i.test(e),c=/firefox/i.test(e),h=/gecko\//i.test(e),p=/seamonkey\//i.test(e),d=/version\/(\d+(\.\d+)?)/i,v,g=m();return g.msie&&g.version>=9||g.chrome&&g.version>=10||g.firefox&&g.version>=4||g.safari&&g.version>=5||g.opera&&g.version>=10?g.a=t:g.msie&&g.version<9||g.chrome&&g.version<10||g.firefox&&g.version<4||g.safari&&g.version<5||g.opera&&g.version<10?g.c=t:g.x=t,g}),define("modules/app",["require","jquery","underscore","backbone","plugins/morpheus","plugins/easing","plugins/touch-fix","plugins/bowser"],function(e){function v(){f.width=l.width(),f.height=l.height(),a.appleios&&(f.height+=60),f.trigger("resize"),d()}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("plugins/morpheus"),s=e("plugins/easing"),o=e("plugins/touch-fix"),u=e("plugins/bowser"),a=window.Modernizr,f=n.extend({},r.Events),l=t(window),c=t("body"),h=t(document);i.easings=s,h.on("click",'[href="#"]',!1);var p=navigator.userAgent;a.addTest("mobile",function(){return u.mobile||/Mobile/i.test(p)}),a.addTest("ipad",function(){return!!p.match(/iPad/i)}),a.addTest("iphone",function(){return!!p.match(/iPhone/i)}),a.addTest("ipod",function(){return!!p.match(/iPod/i)}),a.addTest("appleios",function(){return a.ipad||a.ipod||a.iphone}),f.hasVideo=a.video.webm||a.video.h264,f.autoPlayVideo=f.hasVideo&&!a.mobile,f.hasTransforms=a.csstransforms&&!u.msie,a.appleios&&window.top.scrollTo(0,1),l.on("orientationchange resize",v);var d=n.debounce(function(){f.trigger("lazyResize")},100);return v(),l.on("scroll",function(e){f.trigger("scroll",e)}),h.on("mouseup mouseleave",function(e){f.trigger("mouseup",e)}),f.once("showDeferred",function(){var e=t();n.each(t(".defer-block"),function(n){var r=t(n),i=t(r.html());r.after(i),e=e.add(i)}),f.trigger("insertedBlocks",e)}),f.ready=function(){},f}),define("views/base/aspect-fit",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=r.View.extend({initialize:function(){var e=this.$el.data(),t=(e.aspect||"16:9").split(":");this.aspectW=t[0],this.aspectH=t[1],this.aspect=this.aspectW/this.aspectH,this.on("init",this.init,this)},init:function(){this.$parent=this.$el.parent(),this.parent=this.$parent.data("view"),(this.parent||i).on("resize",this.resize,this),this.resize()},resize:function(){this.parent?(this.width=this.parent.width,this.height=this.parent.height):(this.width=this.$parent.width(),this.height=this.width/this.aspect)}});return s}),define("views/aspect-fit",["require","jquery","underscore","backbone","modules/app","views/base/aspect-fit"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=e("views/base/aspect-fit"),o=s.extend({initialize:function(){s.prototype.initialize.call(this),this.$el.on("mousedown","img",!1)},resize:function(){s.prototype.resize.call(this),this.$el.css({width:this.width,height:this.height})}});return o}),define("plugins/hammer",function(){}),define("modules/load-img",["require","jquery","underscore"],function(e){function r(e,r,i){i&&(r=n.bind(r,i));var s=n.after(e.length,r);e.one("load",s).each(function(){this.complete&&t(this).load();var e=this.src;this.src="",this.src=e})}var t=e("jquery"),n=e("underscore");return r}),define("views/drag-slider",["require","jquery","underscore","backbone","modules/app","plugins/morpheus","plugins/hammer","modules/load-img","plugins/touch-fix","views/base/aspect-fit"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=e("plugins/morpheus"),o=e("plugins/hammer"),u=e("modules/load-img"),a=e("plugins/touch-fix"),f=e("views/base/aspect-fit"),l='<a href="#"></a>',c={speed:1.2,dampen:.3,translate:i.hasTransforms},h={prevent_default:!1,css_hacks:!1,swipe:!0,drag:!0,drag_min_distance:20,transform:!1,tap:!1,tap_double:!1,hold:!1},p=f.extend({initialize:function(){n.bindAll(this);var e=this.$el.data();this.$wrap=this.$el.find(".slides"),this.$slides=this.$el.find(".slide");var s=this.$slides.length;this.$pageNav=this.$el.find(".slider-pages"),this.$pages=t(),this.$img=this.$slides.children("img"),this.trackerX=0,this.upscale=!!e.upscale;if(this.$pageNav.length){for(var o=s;o--;)this.$pages=this.$pages.add(l);var u=this.$pageNav.children(".wrap");u.length?u.html(this.$pages):this.$pageNav.html(this.$pages),this.$pages.on("click",this.click),this.$pages.on("mousedown touchstart",this.focus),this.$pageNav.hasClass("after")&&(this.$el.after(this.$pageNav),this.$pageNav.css("opacity",0),this.navIntro=!0)}this.state=new r.Model({index:0,total:s}),this.state.on("change:index",function(e,t){var n=e.get("total");t>=n&&e.set("index",0,{silent:!0}),t<0&&e.set("index",n-1,{silent:!0})}),e.event&&this.state.on("change:index",function(t,n){i.trigger(e.event,n)}),this.state.on("change:index",this.render,this),this.state.on("change:width",function(){this.render(!0)},this),f.prototype.initialize.call(this)},init:function(){u(this.$img,function(){n.delay(this.intro,600)},this),f.prototype.init.call(this)},intro:function(){this.blur(),this.$img.attr("data-defer")?this.$el.css("opacity",1):s(this.$el,{opacity:1,duration:400,easing:"easeOutQuint",complete:function(){i.trigger("showDeferred")}}),this.enable(),this.navIntro&&s(this.$pageNav,{opacity:1,duration:800,easing:"easeInOutQuint"})},resize:function(){f.prototype.resize.call(this);var e=this.width,n=this.height;this.swipeThreshold=e*.5,this.swipeVelocity=e*.01;var r=this.$slides.length*e||e;this.$wrap.css({width:r,height:n}),this.$slides.each(function(r,i){t(i).css({width:e,height:n,left:r*e})});var i=e/this.aspectW,s=n/this.aspectH,o=Math.max(i,s),u=Math.round(this.aspectW*o),a=Math.round(this.aspectH*o),l=0,c=0;u>e&&(l=-(u-e)*.5),a>n&&(c=-(a-n)*.5),this.upscale&&(u+=1,a+=1),this.$img.css({width:u,height:a,top:c,left:l}),this.$el.css({width:e,height:n}),this.state.set("width",e)},destroy:function(){this.off(),i.off(null,null,this),this.disable()},enable:function(){this.hammer=new window.Hammer(this.$wrap[0],h),this.hammer.ondragstart=this.dragStart,this.$wrap.on("mousedown",n.bind(function(e){return this.stop(),this.$wrap.addClass("down"),this.focus(),!1},this)),i.on("mouseup",function(){return this.$wrap.removeClass("down"),this.reset(),!1},this),this.$wrap.on("touchstart",n.bind(function(){this.stop(),this.focus()},this)),this.$wrap.on("touchend touchcancel",this.reset)},disable:function(){this.hammer.destroy(),this.hammer=null,this.inDrag=!1,i.off("mouseup",null,this),this.$wrap.off()},bindDrag:function(){this.hammer.ondrag=this.drag,this.hammer.ondragend=this.dragEnd,this.inDrag=!0},clearDrag:function(){this.hammer.ondrag=null,this.hammer.ondragend=null,this.inDrag=!1},click:function(e){var n=t(e.target),r=this.$pages.index(n);this.change(r)},dragStart:function(e){this.inDrag||(this.stop(),this.dragStartX=e.position.x,this.dragStartY=e.position.y,this.currentX=0,this.velocity=0,this.distance=0,this.bindDrag())},drag:function(e){this.stop();var t=this.state.get("index"),n=this.state.get("total"),r=t===0,i=t==n-1,s=-(this.dragStartX-e.position.x);s*=c.speed;var o=this.dragDirection;this.dragDirection=s>this.currentX?"right":"left";var u=this.currentX===0||this.dragDirection!=o;this.velocity=u?0:Math.abs(s-this.currentX),this.distance=u?0:this.distance+=this.velocity||1;var a=this.distance>this.swipeThreshold||this.velocity>this.swipeVelocity*4;if(!r&&this.dragDirection==="right"&&a){this.change("-1");return}if(!i&&this.dragDirection==="left"&&a){this.change("+1");return}this.currentX=s;if(r&&s>0||i&&s<0)s*=c.dampen;this.stop(),this.update(s+t*-this.width)},dragEnd:function(e){this.clearDrag();var t=this.state.get("index"),n=this.state.get("total"),r=t===0,i=t==n-1,s=this.distance>this.swipeThreshold*.3||this.velocity>this.swipeVelocity;if(!r&&this.dragDirection==="right"&&s){this.change("-1");return}if(!i&&this.dragDirection==="left"&&s){this.change("+1");return}this.reset()},reset:function(){this.render()},change:function(e){this.stop(),this.focus(),this.clearDrag(),n.isString(e)&&(e=this.state.get("index")+Number(e)),this.state.set("index",e)},render:function(e){var t=this.state.get("index"),n=-(this.width*t);this.$pages.removeClass("selected"),this.$pages.eq(t).addClass("selected"),this.stop();if(e===!0){this.update(n);return}var r=800;r-=r*.6*Math.abs(this.velocity/this.width)||0,this.tween=s.tween(r,this.update,this.blur,"easeOutQuint",this.trackerX,n)},update:function(e){e=Math.round(e);var t=this.$wrap[0].style;c.translate?t[s.transform]="translate("+e+"px,0px)":t.left=e+"px",this.trackerX=e},stop:function(){this.tween&&this.tween.stop()},track:function(e){this.trackerX=e},focus:function(){if(this.hasFocus===!0)return;this.hasFocus=!0,n.each(this.$img,function(e,t){e.style.display="block"})},blur:function(){if(this.hasFocus===!1)return;this.hasFocus=!1;var e=this.state.get("index");n.each(this.$img,function(t,n){t.style.display=n===e?"block":"none"})}});return p}),!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define("plugins/kizzy",t):this[e]=t()}("kizzy",function(){function e(){}function v(){return+(new Date)}function m(e,t){e._[t]&&e._[t].e&&e._[t].e<v()&&e.remove(t)}function g(e){return typeof e=="number"&&isFinite(e)}function y(e){return localStorage[e]}function b(e,t){return localStorage[e]=t,t}function w(e){delete localStorage[e]}function E(){localStorage.clear()}function S(e){var t=f.childNodes,n,r=null;for(var i=0,s=t.length;i<s;i++){n=t.item(i);if(n.getAttribute("key")==e){r=n;break}}return r}function x(e){var t=S(e),n=null;return t&&(n=t.getAttribute("value")),n}function T(e,t){var n=S(e);return n?n.setAttribute("value",t):(n=a.createNode(1,"item",""),n.setAttribute("key",e),n.setAttribute("value",t),f.appendChild(n)),u.save(r),t}function N(e){S(e)&&f.removeChild(node),u.save(r)}function C(){while(f.firstChild)f.removeChild(f.firstChild);u.save(r)}function k(){this._={}}function L(e){this.ns=e,this._=JSON.parse(h(e)||"{}")}function A(e){return new L(e)}var t,n=document,r=n.domain,i=0,s=function(){return 1};try{t=!!localStorage||!!globalStorage,localStorage||(localStorage=globalStorage[r]),i=1}catch(o){i=0;try{if(n.documentElement.addBehavior){i=0,t=1;var u=n.documentElement;u.addBehavior("#default#userData"),u.load(r);var a=u.xmlDocument,f=a.documentElement}}catch(l){t=!1}}var c=e,h=e,p=e,d=e;return t&&(c=i?b:T,h=i?y:x,p=i?w:N,d=i?E:C,s=function(e){try{var t=JSON.stringify(e._);return t=="{}"?p(e.ns):c(e.ns,t),1}catch(n){return 0}}),k.prototype={set:function(e,t,n){return this._[e]={value:t,e:g(n)?v()+n:0},s(this)||this.remove(e),t},get:function(e){return m(this,e),this._[e]?this._[e].value:undefined},remove:function(e){delete this._[e],s(this)},clear:function(){this._={},s(this)},clearExpireds:function(){for(var e in this._)m(this,e);s(this)}},L.prototype=k.prototype,A.remove=p,A.clear=d,A}),define("views/video-shuffle",["require","jquery","underscore","backbone","modules/app","plugins/morpheus","modules/load-img","plugins/kizzy","views/base/aspect-fit"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=e("plugins/morpheus"),o=e("modules/load-img"),u=e("plugins/kizzy"),a=e("views/base/aspect-fit"),f='<video loop="loop"></video>',l=".jpg",c=["webm","mp4"],h=t(".feature-overlay"),p=a.extend({initialize:function(){n.bindAll(this);var e=this.$el.data(),r=t(this.$el.children(".config").html()).filter("i"),i=null,s=n.map(r,function(e){var n=t(e);return i=n.data("fallback"),n.data("path")});if(!s.length)return;this.fallback=i;var o=u("video-shuffle"),f=o.get("last");this.current=n.shuffle(n.without(s,f))[0],this.current||(this.current=s[0]),o.set("last",this.current),a.prototype.initialize.call(this)},init:function(){i.autoPlayVideo?this.loadVideo(this.current):this.loadImg(this.current),a.prototype.init.call(this)},loadVideo:function(e){var r=t(f);r.prop("poster",e+l),n.each(c,function(n){var i=t("<source>").prop({src:e+"."+n,type:"video/"+n});r.append(i)}),this.$el.html(r),this.$media=r;var i=t("<img />").prop("src",e+l);this.preIntro(i)},loadImg:function(e){var n;if(this.fallback){var r=t('<div class="fallback" />');r.css("background","url("+this.fallback+")"),n=t("<img />").prop("src",this.fallback),this.$el.html(r),this.$media=t(),this.preIntro(n);return}n=t("<img />").prop("src",e+l),this.$el.html(n),this.$media=n,this.preIntro(n)},preIntro:function(e){o(e,function(){n.delay(this.intro,600)},this)},intro:function(){s(this.$el,{opacity:1,duration:400,easing:"easeOutQuint"});if(!i.autoPlayVideo)return;var e=this.$media[0];n.defer(function(){e.play()}),h.addClass("on")},resize:function(){a.prototype.resize.call(this);var e=this.width,t=this.height,n=e/this.aspectW,r=t/this.aspectH,i=Math.max(n,r),s=Math.ceil(this.aspectW*i),o=Math.ceil(this.aspectH*i),u=0,f=0;s>e&&(u=-(s-e)*.5),o>t&&(f=-(o-t)*.5),this.$media.css({width:s,height:o,top:f,left:u})}});return p}),define("views/feature-fit",["require","jquery","underscore","modules/app","backbone","plugins/morpheus"],function(e){var t=e("jquery"),n=e("underscore"),r=e("modules/app"),i=e("backbone"),s=e("plugins/morpheus"),o=i.View.extend({initialize:function(){n.bindAll(this);var e=this.$el.data(),r=(e.minAspect||"").split(":");r.length>1&&(this.minAspect=r[0]/r[1]),this.minHeight=parseInt(this.$el.css("min-height"),10),this.bounds={top:n.isNumber(e.top)?e.top:e.top?t(e.top):0,bottom:n.isNumber(e.bottom)?e.bottom:e.bottom?t(e.bottom):0},this.on("init",this.init,this)},init:function(){r.on("resize",this.resize,this),this.resize()},resize:function(){var e=this.bounds.top,i=this.bounds.bottom;n.isNumber(e)||(e=t(e).height()),n.isNumber(i)||(e=t(i).height()),this.width=r.width,this.height=r.height-e-i,this.minAspect&&this.width/this.height<this.minAspect&&(this.height=this.width/this.minAspect),this.height<this.minHeight&&(this.height=this.minHeight),this.tween&&this.tween.stop(),this.tween=s(this.$el,{height:this.height,duration:0,easing:"easeOutExpo",complete:this.update}),n.defer(this.update)},update:function(){this.trigger("resize"),r.trigger("render")}});return o}),define("views/subbar",["require","jquery","underscore","backbone"],function(e){function s(e,t){return e.is(t)||e.has(t).length}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=r.View.extend({initialize:function(){n.bindAll(this),this.isOpen=!1,this.$dropdown=this.$el.find(".dropdown"),this.$title=this.$dropdown.find(".title"),this.$dropdown.on("click",this.click)},click:function(e){this.isOpen?this.close():this.open()},open:function(){this.isOpen=!0,this.$dropdown.addClass("open")},close:function(){this.isOpen=!1,this.$dropdown.removeClass("open")}});return i}),define("modules/breaker",["require","jquery","underscore","backbone","modules/app"],function(e){function f(e,t,n){var r={query:c(e)},i=a.where(r)[0];i||(i=new u(r),a.add(i)),i.on("change:active",t,n),t.call(n,i,i.get("active"))}function l(e,t,n){}function c(e){var r=n.compact(n.map(String(e).split(o),function(e){return t.trim(e)}));return r=n.map(r,function(e){var r=n.map(String(e).split(s),function(e){return t.trim(e)});return r[1]||(r[1]="up"),r[0]&&r.join(s)}),r.join(o)}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s="-",o=",",u=r.Model.extend({initialize:function(){var e=this;e.axes={},n.each(this.get("query").split(o),function(t,n){e.axes[n===0?"width":"height"]=e.range(t)}),i.on("resize",this.update,this),this.update()},update:function(){var e,t,n=!0,r=!0;this.axes.width&&(e=this.axes.width[0],t=this.axes.width[1],e==="any"?n=!0:t==="up"?n=i.width>e:t==="down"?n=i.width<=e:n=i.width>e&&i.width<=t),this.axes.height&&(e=this.axes.height[0],t=this.axes.height[1],t==="up"?r=i.height>e:t==="down"?r=i.height<=e:r=i.height>e&&i.height<=t),this.set("active",n&&r)},range:function(e){e=e.split(s);var t=e[0],r=e[1];return t!=="any"&&(t=parseInt(t,10)),n.contains(["up","down"],r)||(r=parseInt(r,10)),[t,r]}}),a=new(r.Collection.extend({model:u})),h={add:function(e,t,n){f.apply(this,arguments)},remove:function(e,t,n){l.apply(this,arguments)}};return h}),define("views/affix",["require","jquery","underscore","backbone","modules/app","modules/breaker"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=e("modules/breaker"),o="<i />",u=r.View.extend({initialize:function(){var e=this.$el.data();this.$origin=t(o).insertBefore(this.$el),this.$top=t(e.top),this.$bottom=t(e.bottom),this.$width=t(e.width),this.$doc=t(document),this.$win=t(window),this.bounds=new r.Model({top:0,bottom:Number.POSITIVE_INFINITY}),this.bounds.on("change",this.update,this),i.on("render resize",this.resize,this),i.on("scroll",this.update,this),this.enable(),e.breakpoint&&s.add(e.breakpoint,function(e,t){t?this.enable():this.disable()},this)},resize:function(){var e={};e.originTop=this.$origin.offset().top,e.height=this.$el.height(),this.$top.length&&(e.top=this.$top.outerHeight()),this.$bottom.length&&(e.bottom=this.$bottom.offset().top),this.$width.length&&(e.width=this.$width.width()),this.bounds.set(e)},update:function(){if(!this.enabled)return;var e=this.$win.scrollTop(),t=this.$el.offset(),n=this.bounds.get("originTop"),r=this.bounds.get("height"),i=this.bounds.get("top"),s=this.bounds.get("bottom");this.$width.length&&this.$el.width(this.bounds.get("width"));var o=e<n-i,u=e+r>=s-i;if(o)return this.unpin(0);if(u)return this.unpin(s-n-r);var a=e>=n-i,f=e+r<s-i;if(a&&f)return this.pin(i)},enable:function(){this.enabled=!0,this.resize(),this.update()},disable:function(){this.enabled=!1,this.unpin(0)},pin:function(e){this.$el.css({position:"fixed",top:e})},unpin:function(e){this.$el.css({position:"absolute",top:e})}});return u}),define("views/spokey",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s="<i class=circ></i>",o="<i class=line></i>",u='<img src="" alt="">',a=20,f=r.View.extend({initialize:function(){this.$circ=t(s),this.$line=t(o);var e=this.$el.data("image"),n=e?t(u).prop("src",e):null;this.$el.append(this.$circ,this.$line,n),i.on("resize render",this.render,this),this.render()},render:function(){var e=this.$el.width();this.$el.height(e),this.$circ.css({width:e-a,height:e-a}),this.$line.css({width:Math.sqrt(e*e+e*e),top:e})}});return f}),define("views/auto-scale",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=r.View.extend({initialize:function(){i.on("resize render",this.render,this)},render:function(){this.$el.height(this.$el.width())}});return s}),define("views/load-tweet",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=r.View.extend({initialize:function(){n.bindAll(this),t.getJSON("/tweets.json",this.render)},render:function(e){e[0]&&e[0].text&&(this.$el.html(e[0].text),n.defer(function(){i.trigger("render")}))}});return s}),function(e){jQuery.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}}(jQuery),define("plugins/destroyed",function(){}),define("modules/fit-text",["require","jquery","modules/app","plugins/destroyed"],function(e){var t=e("jquery"),n=e("modules/app"),r=e("plugins/destroyed");t.fn.fitText=function(e,r){var i=e||1,s=t.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},r);return this.each(function(){var e=t(this),r=function(){e.css("font-size",Math.max(Math.min(e.width()/(i*10),parseFloat(s.maxFontSize)),parseFloat(s.minFontSize)))};n.on("resize render",r),r(),e.on("destroyed",function(){n.off(null,r)})})}}),define("views/scale-text",["require","jquery","underscore","backbone","modules/fit-text","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/fit-text"),s=e("modules/app"),o=r.View.extend({initialize:function(){var e=this.$el.data("comp")||1.5,t=this.$el.data("min")||20,n=this.$el.data("max")||45;this.$el.fitText(e,{minFontSize:t,maxFontSize:n}),s.trigger("text-scaled")}});return o}),define("views/auto-heights",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=r.View.extend({initialize:function(){n.bindAll(this),this.on("init",this.init,this),this.lazyRender=n.debounce(this.render,50)},init:function(){this.select(),i.on("cache-selectors",this.select,this),i.on("resize render",this.lazyRender,this),this.$cols.find("img").first().one("load",this.render),this.render()},select:function(){var e=this.$el.data("selector")||"li";this.$cols=this.$el.find(e)},render:function(){var e=0;this.$cols.css("height","auto"),n.each(this.$cols,function(n){var r=t(n),i=r.css("display")=="none"?0:r.outerHeight();i>e&&(e=i)}),this.$cols.height(e)}});return s}),define("views/slider",["require","jquery","underscore","backbone","modules/app"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=r.View.extend({initialize:function(){this.$slides=this.$el.find(".slide"),this.$pages=this.$el.find(".page-controls .page"),this.$arrows=this.$el.find(".page-arrows"),this.state=new r.Model({index:0,total:this.$slides.length}),this.state.on("change:index",function(e,t){t>=e.get("total")&&e.set("index",0,{silent:!0}),t<0&&e.set("index",e.get("total")-1,{silent:!0})}),this.state.on("change:index",this.render,this),this.render()},events:{"click .page-arrows":function(e){var n=t(e.target);n.hasClass("next")&&this.state.set("index",this.state.get("index")+1),n.hasClass("previous")&&this.state.set("index",this.state.get("index")-1)},"click .page-controls .page":function(e){var n=t(e.target),r=this.$pages.index(n);this.state.set("index",r)}},render:function(){var e=this.state.get("index");this.$pages.removeClass("active").eq(e).addClass("active"),this.$slides.removeClass("active").eq(e).addClass("active"),i.trigger("render")}});return s}),define("modules/scroll-to",["require","jquery","underscore","backbone","plugins/morpheus"],function(e){function l(e){c(),f=i.tween(800,h,d,"easeOutQuint",s.scrollTop(),e),p()}function c(){f&&f.stop()}function h(e){s.scrollTop(e)}function p(){s.on(u,c),o.on(a,c)}function d(){s.off(u,c),o.off(a,c)}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("plugins/morpheus"),s=t(window),o=t(document),u="mousewheel DOMMouseScroll",a="mousewheel touchmove mousedown",f;return l}),define("views/page-down",["require","jquery","underscore","backbone","plugins/morpheus","modules/app","modules/scroll-to"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("plugins/morpheus"),s=e("modules/app"),o=e("modules/scroll-to"),u=t(window),a=r.View.extend({initialize:function(){n.bindAll(this);var e=this.$el.data();this.$target=t(e.target);if(!this.$target.length)return;this.hideAfter=n.isNumber(e.hideAfter)?e.hideAfter:!1,s.on("lazyResize render scroll",this.update,this),n.defer(this.update),this.$el.on("click",this.click)},click:function(){return o(this.targTop),!1},update:function(){this.scrollTop=u.scrollTop(),this.targTop=Math.round(this.$target.offset().top);if(this.hideAfter===!1)return;this.scrollTop<this.hideAfter?this.show():this.hide()},show:function(){if(this.visible===!0)return;this.visible=!0;var e=this.el;this.fade&&this.fade.stop(),this.fade=i(e,{opacity:1,duration:400,easing:"easeOutQuint"}),e.style.display="block"},hide:function(){if(this.visible===!1)return;this.visible=!1;var e=this.el;this.fade&&this.fade.stop(),this.fade=i(e,{opacity:0,duration:400,easing:"easeOutQuint",complete:function(){e.style.display="none"}})}});return a}),define("views/text-slides",["require","jquery","underscore","backbone","modules/app","plugins/morpheus"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s=e("plugins/morpheus"),o=r.View.extend({initialize:function(){var e=this.$el.data("event");i.on(e,this.render,this),this.$slides=this.$el.children(".slide")},render:function(e){n.each(this.$slides,function(t,n){t.style.display=n===e?"block":"none"}),this.fade&&this.fade.stop(),this.$el.css("opacity",0),this.fade=s(this.$el,{opacity:.99,duration:600,easing:"easeInOutQuad"})}});return o}),define("views/careers",["require","jquery","underscore","plugins/morpheus","modules/app"],function(e){function f(){i.on("resize",l),l()}function l(){u.css("min-height",a.height())}var t=e("jquery"),n=e("underscore"),r=e("plugins/morpheus"),i=e("modules/app"),s=t(window),o=t("body"),u=t(".main-container"),a=t(".sidebar");o.hasClass("p-careers")&&f()}),define("views/work",["require","jquery","underscore","plugins/morpheus","modules/app"],function(e){function a(){i.on("resize",f),f()}function f(){s.width()>700?u.css("height",s.height()):u.css("height","450px")}function l(){t(".content-title small").html()===""&&(s.width()>550?t(".content-title h1").css("padding-top",22):t(".content-title h1").css("padding-top",16))}var t=e("jquery"),n=e("underscore"),r=e("plugins/morpheus"),i=e("modules/app"),s=t(window),o=t("body"),u=t(".dropdown").find(".items");o.hasClass("p-work")&&a(),l(),t(window).resize(function(){l()})}),define("views/profile",["require","jquery","underscore","plugins/morpheus","modules/app"],function(e){function h(){p(),d(),v()}function p(){s.width()<700&&t("audio").remove()}function d(){i.on("resize",g);var e=n.throttle(m,100);s.scroll(e)}function v(){g()}function m(){var e=s.scrollTop();if(e<1e3){var n=b(s.scrollTop(),1e3,0,0,1);n>=0&&e>=0&&t("video").prop("volume",n)}else t("video").prop("volume",0)}function g(){y()}function y(){a.find(".offering").each(function(){var e=t(this).find("h2").find(".txt");e.css("top",65-e.height()/2)})}function b(e,t,n,r,i){return Math.min(1,w(i,r,E(e,t,n)))}function w(e,t,n){return(t-e)*n+e}function E(e,t,n){return(e-n)/(t-n)}var t=e("jquery"),n=e("underscore"),r=e("plugins/morpheus"),i=e("modules/app"),s=t(window),o=t("body"),u=t(".who-we-are"),a=t(".offerings-wrap"),f=[],l=1,c=null;o.hasClass("p-profile")&&h()}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!templates/work-index-thumbnail.html",[],function(){return'<li>\n	<a href="<%=link%>">\n		<div class="thumbnail">\n			<img alt="<%=title%> thumbnail" src="<%=image%>">\n		</div>\n		<h4 class="title">\n			<span class="plus"><span class="x"></span><span class="y"></span></span>\n			<%=title%>\n				<small><%=subtitle%></small>\n		</h4>\n	</a>\n</li>'}),define("text!templates/news-index-thumbnail.html",[],function(){return'<li>\n	<a href="<%=link%>">\n		<div class="thumbnail">\n			<img alt="<%=title%> thumbnail" src="<%=image%>">\n		</div>\n		<h4 class="title">\n			<span class="plus small"><span class="x"></span><span class="y"></span></span>\n			<%=title%>\n		</h4>\n	</a>\n</li>'}),define("views/load-more",["require","jquery","underscore","backbone","modules/app","text!templates/work-index-thumbnail.html","text!templates/news-index-thumbnail.html"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("modules/app"),s={"work-index-thumbnail":n.template(e("text!templates/work-index-thumbnail.html")),"news-index-thumbnail":n.template(e("text!templates/news-index-thumbnail.html"))},o=r.View.extend({page:1,initialize:function(){n.bindAll(this),this.url="/"+this.$el.data("controller")+"/more"+location.search,this.template=s[this.$el.data("template")],this.$container=t(".load-more-listing"),this.$button=t(".load-more-button")},events:{click:"clicked"},clicked:function(){t.get(this.url,{page:this.page+1},n.bind(function(e,t){if(t!="success")return;this.page++,n.each(e.results,function(e,t,n){this.add(e,t)},this),e.remaining>0?this.$button.text(this.$button.text().replace(/\(\d+\)/,"("+e.remaining+")")):this.$button.hide(),i.trigger("cache-selectors"),i.trigger("resize")},this),"json")},add:function(e,n){var r=t(this.template(e));n%3===2&&r.addClass("last"),this.$container.append(r)}});return o}),define("views/nav",["require","jquery","underscore","plugins/morpheus"],function(e){function l(){c(),h()}function c(){}function h(){a.on("click",p)}function p(){f?(f=!1,u.find("ul").removeClass("on"),a.removeClass("on"),n.delay(function(){u.hide()},200)):(f=!0,u.show(),n.defer(function(){u.find("ul").addClass("on")}),a.addClass("on"))}var t=e("jquery"),n=e("underscore"),r=e("plugins/morpheus"),i=t(window),s=t("body"),o=t("nav"),u=t("#mobile-nav"),a=t("#mobile-nav-button"),f=!1;l()}),define("modules/manifest",["require","jquery","underscore","backbone","views/aspect-fit","views/drag-slider","views/video-shuffle","views/feature-fit","views/subbar","views/affix","views/spokey","views/auto-scale","views/load-tweet","views/scale-text","views/auto-heights","views/slider","views/page-down","views/text-slides","views/careers","views/work","views/profile","views/load-more","views/nav"],function(e){function a(e){var r=e.find(u).add(e.filter(u));if(!r.length)return;var i=[];n.each(r,function(e){var n,r,u;n=t(e),r=s.views[n.attr(o)];if(!r)return;u=new r({el:e}),n.data("view",u),i.push(u)}),n.invoke(i,"trigger","init")}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i,s={},o="data-js-view",u="["+o+"]";return s.views={"aspect-fit":e("views/aspect-fit"),"drag-slider":e("views/drag-slider"),"video-shuffle":e("views/video-shuffle"),"feature-fit":e("views/feature-fit"),subbar:e("views/subbar"),affix:e("views/affix"),spokey:e("views/spokey"),"auto-scale":e("views/auto-scale"),"load-tweet":e("views/load-tweet"),"scale-text":e("views/scale-text"),"auto-heights":e("views/auto-heights"),slider:e("views/slider"),"page-down":e("views/page-down"),"text-slides":e("views/text-slides"),"p-careers":e("views/careers"),"p-work":e("views/work"),"p-profile":e("views/profile"),"load-more":e("views/load-more"),nav:e("views/nav")},s.ready=function(e){i=e,a(t(document)),i.on("insertedBlocks",a)},s}),define("bkwld/jquery-views",["require","jquery"],function(e){var t=e("jquery"),n="jquery-view-inits",r=0;t.fn.views=function(e,i){return e[n]||(e[n]=r++),this.each(function(){var r=t.data(this,n)||t.data(this,n,{});if(r[e[n]])return;new e(t.extend({el:this},i)),r[e[n]]=!0,t.data(this,n,r)})}}),define("views/draggable",["require","jquery","underscore","backbone"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i={activeSlide:0};return i.initialize=function(){n.bindAll(this),this.$win=t(window),this.$cards=this.$el.find(t(".card"));if(this.$win.outerWidth()<=767)return;this.$cards.on("mousedown",this.getClick),this.$cards.on("mouseup",this.endClick)},i.getClick=function(e){var n=this,r=e.pageX,i=e.pageX-this.$cards.offset().left;return this.$el.mousemove(function(e){var n=t(this);r=e.pageX;if(n.offset().left>0){n.stop().animate({left:0});return}if(n.offset().left<-(t(window).width()*2)){n.stop().animate({left:-(t(window).width()*2-1)});return}n.stop().css({left:e.pageX-i})}).on("mouseup",function(){var e=t(this).css("left").replace("px",""),r=e/t(window).width(),i=Math.floor(Math.abs(r)+.5);n.trigger("indexChanged",i)}),!1},i.endClick=function(){this.$el.unbind("mousemove")},r.View.extend(i)}),define("views/home-video-slider",["require","jquery","underscore","backbone","views/draggable"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("views/draggable"),s={activeCard:0};return s.initialize=function(){n.bindAll(this),this.$win=t(window),this.$cards=this.$el.find(t(".card")),this.$wrap=this.$el.find(t(".slide-wrap")),this.$pagination=this.$el.find(t(".pagination")),this.$bullets=this.$pagination.find(t(".bullet")),this.$video=this.$el.find("video");if(this.$win.outerWidth()<=767){this.$el.find(t("video")).remove(),console.log("removing "+this.$el.find(t("video")));return}this.$el.animate({height:this.$win.height()-200},{complete:this.setup}),this.aspect=this.videoAspect=1,this.videoAspect=this.$video.eq(0).innerWidth()/this.$video.eq(0).innerHeight(),this.$win.on("resize",n.debounce(this.positionCards,200)),this.$bullets.on("click",this.setBullet),this.draggable=new i({el:this.$(".slide-wrap")[0]}),this.draggable.on("indexChanged",this.goToIndex)},s.goToIndex=function(e){this.moveCard(e),this.$bullets.removeClass("active"),this.$bullets.eq(e).addClass("active")},s.setup=function(){this.positionCards(),this.playActive(),this.$cards.animate({opacity:1}),this.$video.eq(0)[0].readyState>3&&this.$video.animate({opacity:1})},s.positionCards=function(){this.$pagination.css("left",this.$win.width()-100),this.$cards.width(this.$win.width()),this.containerWidth=this.$cards.outerWidth()*3,this.$wrap.width(this.containerWidth),this.$wrap.css({left:-(this.$win.width()*this.activeCard)}),this.resizeVideo()},s.resizeVideo=function(){this.aspect=this.$video.eq(0).parent().outerWidth()/this.$video.eq(0).parent().outerHeight(),this.videoAspect>this.aspect?(this.$video.css("height","100%"),this.$video.css("width","auto")):this.videoAspect<this.aspect&&(this.$video.css("width","100%"),this.$video.css("height","auto"))},s.setBullet=function(e){var n=t(e.currentTarget),r=this.$bullets.index(n);if(this.activeCard==r)return;this.$bullets.removeClass("active"),n.addClass("active"),this.moveCard(r)},s.moveCard=function(e){this.$wrap.stop().animate({left:-(this.$win.width()*e)}),this.$cards.eq(this.activeCard).find(t("video"))[0].pause(),this.activeCard=e,this.playActive()},s.playActive=function(){var e=this.$cards.eq(this.activeCard).find(t("video"));e[0].play()},r.View.extend(s)}),define("start",["require","jquery","modules/app","modules/manifest","bkwld/jquery-views","views/home-video-slider"],function(e){var t=e("jquery"),n=e("modules/app"),r=e("modules/manifest"),i=e("bkwld/jquery-views");t(function(){n.ready(),r.ready(n),t(".home-video-slider").views(e("views/home-video-slider"))})}),require.config({baseUrl:"/js/",stubModules:["text"],map:{"*":{hammer:"jquery-hammerjs",hammerjs:"vendor/hammerjs/hammer",underscore:"lodash"}},paths:{jquery:"empty:",bkwld:"vendor/bkwld",hammerjs:"vendor/hammerjs/hammer",lodash:"vendor/lodash/dist/lodash.compat",tram:"vendor/tram/dist/tram-umd",backbone:"vendor/backbone/backbone","requirejs-text":"vendor/requirejs-text/text"}}),require(["bkwld/console","bkwld/csrf","start"]),define("main",function(){});